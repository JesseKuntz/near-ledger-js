(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.nearLedger=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},{}],2:[function(require,module,exports){(function(Buffer){(function(){"use strict";var base64=require("base64-js");var ieee754=require("ieee754");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;exports.kMaxLength=K_MAX_LENGTH;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function typedArraySupport(){try{var arr=new Uint8Array(1);arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return arr.foo()===42}catch(e){return false}}Object.defineProperty(Buffer.prototype,"parent",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(Buffer.prototype,"offset",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset}});function createBuffer(length){if(length>K_MAX_LENGTH){throw new RangeError('The value "'+length+'" is invalid for option "size"')}var buf=new Uint8Array(length);buf.__proto__=Buffer.prototype;return buf}function Buffer(arg,encodingOrOffset,length){if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}Buffer.poolSize=8192;function from(value,encodingOrOffset,length){if(typeof value==="string"){return fromString(value,encodingOrOffset)}if(ArrayBuffer.isView(value)){return fromArrayLike(value)}if(value==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer)){return fromArrayBuffer(value,encodingOrOffset,length)}if(typeof value==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var valueOf=value.valueOf&&value.valueOf();if(valueOf!=null&&valueOf!==value){return Buffer.from(valueOf,encodingOrOffset,length)}var b=fromObject(value);if(b)return b;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof value[Symbol.toPrimitive]==="function"){return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)};Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be of type number')}else if(size<0){throw new RangeError('The value "'+size+'" is invalid for option "size"')}}function alloc(size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill)}return createBuffer(size)}Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)};function allocUnsafe(size){assertSize(size);return createBuffer(size<0?0:checked(size)|0)}Buffer.allocUnsafe=function(size){return allocUnsafe(size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)};function fromString(string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}var length=byteLength(string,encoding)|0;var buf=createBuffer(length);var actual=buf.write(string,encoding);if(actual!==length){buf=buf.slice(0,actual)}return buf}function fromArrayLike(array){var length=array.length<0?0:checked(array.length)|0;var buf=createBuffer(length);for(var i=0;i<length;i+=1){buf[i]=array[i]&255}return buf}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('"offset" is outside of buffer bounds')}if(array.byteLength<byteOffset+(length||0)){throw new RangeError('"length" is outside of buffer bounds')}var buf;if(byteOffset===undefined&&length===undefined){buf=new Uint8Array(array)}else if(length===undefined){buf=new Uint8Array(array,byteOffset)}else{buf=new Uint8Array(array,byteOffset,length)}buf.__proto__=Buffer.prototype;return buf}function fromObject(obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;var buf=createBuffer(len);if(buf.length===0){return buf}obj.copy(buf,0,0,len);return buf}if(obj.length!==undefined){if(typeof obj.length!=="number"||numberIsNaN(obj.length)){return createBuffer(0)}return fromArrayLike(obj)}if(obj.type==="Buffer"&&Array.isArray(obj.data)){return fromArrayLike(obj.data)}}function checked(length){if(length>=K_MAX_LENGTH){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+K_MAX_LENGTH.toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return b!=null&&b._isBuffer===true&&b!==Buffer.prototype};Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array))a=Buffer.from(a,a.offset,a.byteLength);if(isInstance(b,Uint8Array))b=Buffer.from(b,b.offset,b.byteLength);if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!Array.isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(isInstance(buf,Uint8Array)){buf=Buffer.from(buf)}if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof string)}var len=string.length;var mustMatch=arguments.length>2&&arguments[2]===true;if(!mustMatch&&len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase){return mustMatch?-1:utf8ToBytes(string).length}encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer.prototype.toString=function toString(){var length=this.length;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim();if(this.length>max)str+=" ... ";return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)){target=Buffer.from(target,target.offset,target.byteLength)}if(!Buffer.isBuffer(target)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof target)}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(numberIsNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(length>strLen/2){length=strLen/2}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset>>>0;if(isFinite(length)){length=length>>>0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;++i){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype;return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,255,0);this[offset]=value&255;return offset+1};Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255;return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;if(this===target&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(targetStart,start,end)}else if(this===target&&start<targetStart&&targetStart<end){for(var i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}if(val.length===1){var code=val.charCodeAt(0);if(encoding==="utf8"&&code<128||encoding==="latin1"){val=code}}}else if(typeof val==="number"){val=val&255}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding);var len=bytes.length;if(len===0){throw new TypeError('The value "'+val+'" is invalid for argument "value"')}for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){str=str.split("=")[0];str=str.trim().replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isInstance(obj,type){return obj instanceof type||obj!=null&&obj.constructor!=null&&obj.constructor.name!=null&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!==obj}}).call(this)}).call(this,require("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:4}],3:[function(require,module,exports){"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;module.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;function checkListener(listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function _getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;checkListener(listener);events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=_getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){checkListener(listener);this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){checkListener(listener);this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;checkListener(listener);events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}function once(emitter,name){return new Promise(function(resolve,reject){function errorListener(err){emitter.removeListener(name,resolver);reject(err)}function resolver(){if(typeof emitter.removeListener==="function"){emitter.removeListener("error",errorListener)}resolve([].slice.call(arguments))}eventTargetAgnosticAddListener(emitter,name,resolver,{once:true});if(name!=="error"){addErrorHandlerIfEventEmitter(emitter,errorListener,{once:true})}})}function addErrorHandlerIfEventEmitter(emitter,handler,flags){if(typeof emitter.on==="function"){eventTargetAgnosticAddListener(emitter,"error",handler,flags)}}function eventTargetAgnosticAddListener(emitter,name,listener,flags){if(typeof emitter.on==="function"){if(flags.once){emitter.once(name,listener)}else{emitter.on(name,listener)}}else if(typeof emitter.addEventListener==="function"){emitter.addEventListener(name,function wrapListener(arg){if(flags.once){emitter.removeEventListener(name,wrapListener)}listener(arg)})}else{throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof emitter)}}},{}],4:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],5:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],6:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _errors=require("@ledgerhq/errors");const Tag=5;function asUInt16BE(value){const b=Buffer.alloc(2);b.writeUInt16BE(value,0);return b}const initialAcc={data:Buffer.alloc(0),dataLength:0,sequence:0};const createHIDframing=(channel,packetSize)=>{return{makeBlocks(apdu){let data=Buffer.concat([asUInt16BE(apdu.length),apdu]);const blockSize=packetSize-5;const nbBlocks=Math.ceil(data.length/blockSize);data=Buffer.concat([data,Buffer.alloc(nbBlocks*blockSize-data.length+1).fill(0)]);const blocks=[];for(let i=0;i<nbBlocks;i++){const head=Buffer.alloc(5);head.writeUInt16BE(channel,0);head.writeUInt8(Tag,2);head.writeUInt16BE(i,3);const chunk=data.slice(i*blockSize,(i+1)*blockSize);blocks.push(Buffer.concat([head,chunk]))}return blocks},reduceResponse(acc,chunk){let{data,dataLength,sequence}=acc||initialAcc;if(chunk.readUInt16BE(0)!==channel){throw new _errors.TransportError("Invalid channel","InvalidChannel")}if(chunk.readUInt8(2)!==Tag){throw new _errors.TransportError("Invalid tag","InvalidTag")}if(chunk.readUInt16BE(3)!==sequence){throw new _errors.TransportError("Invalid sequence","InvalidSequence")}if(!acc){dataLength=chunk.readUInt16BE(5)}sequence++;const chunkData=chunk.slice(acc?5:7);data=Buffer.concat([data,chunkData]);if(data.length>dataLength){data=data.slice(0,dataLength)}return{data:data,dataLength:dataLength,sequence:sequence}},getReducedResult(acc){if(acc&&acc.dataLength===acc.data.length){return acc.data}}}};var _default=createHIDframing;exports.default=_default}).call(this)}).call(this,require("buffer").Buffer)},{"@ledgerhq/errors":52,buffer:2}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getInfosForServiceUuid=exports.getBluetoothServiceUuids=exports.identifyProductName=exports.identifyUSBProductId=exports.getDeviceModel=exports.ledgerUSBVendorId=exports.IIWebUSB=exports.IICCID=exports.IIU2F=exports.IIKeyboardHID=exports.IIGenericHID=void 0;var _semver=_interopRequireDefault(require("semver"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const IIGenericHID=1;exports.IIGenericHID=IIGenericHID;const IIKeyboardHID=2;exports.IIKeyboardHID=IIKeyboardHID;const IIU2F=4;exports.IIU2F=IIU2F;const IICCID=8;exports.IICCID=IICCID;const IIWebUSB=16;exports.IIWebUSB=IIWebUSB;const devices={blue:{id:"blue",productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:true,memorySize:480*1024,blockSize:4*1024,getBlockSize:_firwareVersion=>4*1024},nanoS:{id:"nanoS",productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:true,memorySize:320*1024,blockSize:4*1024,getBlockSize:firmwareVersion=>_semver.default.lt(_semver.default.coerce(firmwareVersion),"2.0.0")?4*1024:2*1024},nanoX:{id:"nanoX",productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:false,memorySize:2*1024*1024,blockSize:4*1024,getBlockSize:_firwareVersion=>4*1024,bluetoothSpec:[{serviceUuid:"d973f2e0-b19e-11e2-9e96-0800200c9a66",notifyUuid:"d973f2e1-b19e-11e2-9e96-0800200c9a66",writeUuid:"d973f2e2-b19e-11e2-9e96-0800200c9a66"},{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572"}]}};const productMap={Blue:"blue","Nano S":"nanoS","Nano X":"nanoX"};const devicesList=Object.values(devices);const ledgerUSBVendorId=11415;exports.ledgerUSBVendorId=ledgerUSBVendorId;const getDeviceModel=id=>{const info=devices[id];if(!info)throw new Error("device '"+id+"' does not exist");return info};exports.getDeviceModel=getDeviceModel;const identifyUSBProductId=usbProductId=>{const legacy=devicesList.find(d=>d.legacyUsbProductId===usbProductId);if(legacy)return legacy;const mm=usbProductId>>8;const deviceModel=devicesList.find(d=>d.productIdMM===mm);return deviceModel};exports.identifyUSBProductId=identifyUSBProductId;const identifyProductName=productName=>{const productId=productMap[productName];const deviceModel=devicesList.find(d=>d.id===productId);return deviceModel};exports.identifyProductName=identifyProductName;const bluetoothServices=[];const serviceUuidToInfos={};for(let id in devices){const deviceModel=devices[id];const{bluetoothSpec}=deviceModel;if(bluetoothSpec){for(let i=0;i<bluetoothSpec.length;i++){const spec=bluetoothSpec[i];bluetoothServices.push(spec.serviceUuid);serviceUuidToInfos[spec.serviceUuid]=serviceUuidToInfos[spec.serviceUuid.replace(/-/g,"")]=_objectSpread({deviceModel:deviceModel},spec)}}}const getBluetoothServiceUuids=()=>bluetoothServices;exports.getBluetoothServiceUuids=getBluetoothServiceUuids;const getInfosForServiceUuid=uuid=>serviceUuidToInfos[uuid.toLowerCase()];exports.getInfosForServiceUuid=getInfosForServiceUuid},{semver:35}],8:[function(require,module,exports){const ANY=Symbol("SemVer ANY");class Comparator{static get ANY(){return ANY}constructor(comp,options){options=parseOptions(options);if(comp instanceof Comparator){if(comp.loose===!!options.loose){return comp}else{comp=comp.value}}debug("comparator",comp,options);this.options=options;this.loose=!!options.loose;this.parse(comp);if(this.semver===ANY){this.value=""}else{this.value=this.operator+this.semver.version}debug("comp",this)}parse(comp){const r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];const m=comp.match(r);if(!m){throw new TypeError(`Invalid comparator: ${comp}`)}this.operator=m[1]!==undefined?m[1]:"";if(this.operator==="="){this.operator=""}if(!m[2]){this.semver=ANY}else{this.semver=new SemVer(m[2],this.options.loose)}}toString(){return this.value}test(version){debug("Comparator.test",version,this.options.loose);if(this.semver===ANY||version===ANY){return true}if(typeof version==="string"){try{version=new SemVer(version,this.options)}catch(er){return false}}return cmp(version,this.operator,this.semver,this.options)}intersects(comp,options){if(!(comp instanceof Comparator)){throw new TypeError("a Comparator is required")}if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(this.operator===""){if(this.value===""){return true}return new Range(comp.value,options).test(this.value)}else if(comp.operator===""){if(comp.value===""){return true}return new Range(this.value,options).test(comp.semver)}const sameDirectionIncreasing=(this.operator===">="||this.operator===">")&&(comp.operator===">="||comp.operator===">");const sameDirectionDecreasing=(this.operator==="<="||this.operator==="<")&&(comp.operator==="<="||comp.operator==="<");const sameSemVer=this.semver.version===comp.semver.version;const differentDirectionsInclusive=(this.operator===">="||this.operator==="<=")&&(comp.operator===">="||comp.operator==="<=");const oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&(this.operator===">="||this.operator===">")&&(comp.operator==="<="||comp.operator==="<");const oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&(this.operator==="<="||this.operator==="<")&&(comp.operator===">="||comp.operator===">");return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan}}module.exports=Comparator;const parseOptions=require("../internal/parse-options");const{re,t}=require("../internal/re");const cmp=require("../functions/cmp");const debug=require("../internal/debug");const SemVer=require("./semver");const Range=require("./range")},{"../functions/cmp":12,"../internal/debug":37,"../internal/parse-options":39,"../internal/re":40,"./range":9,"./semver":10}],9:[function(require,module,exports){class Range{constructor(range,options){options=parseOptions(options);if(range instanceof Range){if(range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease){return range}else{return new Range(range.raw,options)}}if(range instanceof Comparator){this.raw=range.value;this.set=[[range]];this.format();return this}this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;this.raw=range;this.set=range.split(/\s*\|\|\s*/).map(range=>this.parseRange(range.trim())).filter(c=>c.length);if(!this.set.length){throw new TypeError(`Invalid SemVer Range: ${range}`)}if(this.set.length>1){const first=this.set[0];this.set=this.set.filter(c=>!isNullSet(c[0]));if(this.set.length===0)this.set=[first];else if(this.set.length>1){for(const c of this.set){if(c.length===1&&isAny(c[0])){this.set=[c];break}}}}this.format()}format(){this.range=this.set.map(comps=>{return comps.join(" ").trim()}).join("||").trim();return this.range}toString(){return this.range}parseRange(range){range=range.trim();const memoOpts=Object.keys(this.options).join(",");const memoKey=`parseRange:${memoOpts}:${range}`;const cached=cache.get(memoKey);if(cached)return cached;const loose=this.options.loose;const hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace(this.options.includePrerelease));debug("hyphen replace",range);range=range.replace(re[t.COMPARATORTRIM],comparatorTrimReplace);debug("comparator trim",range,re[t.COMPARATORTRIM]);range=range.replace(re[t.TILDETRIM],tildeTrimReplace);range=range.replace(re[t.CARETTRIM],caretTrimReplace);range=range.split(/\s+/).join(" ");const compRe=loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];const rangeList=range.split(" ").map(comp=>parseComparator(comp,this.options)).join(" ").split(/\s+/).map(comp=>replaceGTE0(comp,this.options)).filter(this.options.loose?comp=>!!comp.match(compRe):()=>true).map(comp=>new Comparator(comp,this.options));const l=rangeList.length;const rangeMap=new Map;for(const comp of rangeList){if(isNullSet(comp))return[comp];rangeMap.set(comp.value,comp)}if(rangeMap.size>1&&rangeMap.has(""))rangeMap.delete("");const result=[...rangeMap.values()];cache.set(memoKey,result);return result}intersects(range,options){if(!(range instanceof Range)){throw new TypeError("a Range is required")}return this.set.some(thisComparators=>{return isSatisfiable(thisComparators,options)&&range.set.some(rangeComparators=>{return isSatisfiable(rangeComparators,options)&&thisComparators.every(thisComparator=>{return rangeComparators.every(rangeComparator=>{return thisComparator.intersects(rangeComparator,options)})})})})}test(version){if(!version){return false}if(typeof version==="string"){try{version=new SemVer(version,this.options)}catch(er){return false}}for(let i=0;i<this.set.length;i++){if(testSet(this.set[i],version,this.options)){return true}}return false}}module.exports=Range;const LRU=require("lru-cache");const cache=new LRU({max:1e3});const parseOptions=require("../internal/parse-options");const Comparator=require("./comparator");const debug=require("../internal/debug");const SemVer=require("./semver");const{re,t,comparatorTrimReplace,tildeTrimReplace,caretTrimReplace}=require("../internal/re");const isNullSet=c=>c.value==="<0.0.0-0";const isAny=c=>c.value==="";const isSatisfiable=(comparators,options)=>{let result=true;const remainingComparators=comparators.slice();let testComparator=remainingComparators.pop();while(result&&remainingComparators.length){result=remainingComparators.every(otherComparator=>{return testComparator.intersects(otherComparator,options)});testComparator=remainingComparators.pop()}return result};const parseComparator=(comp,options)=>{debug("comp",comp,options);comp=replaceCarets(comp,options);debug("caret",comp);comp=replaceTildes(comp,options);debug("tildes",comp);comp=replaceXRanges(comp,options);debug("xrange",comp);comp=replaceStars(comp,options);debug("stars",comp);return comp};const isX=id=>!id||id.toLowerCase()==="x"||id==="*";const replaceTildes=(comp,options)=>comp.trim().split(/\s+/).map(comp=>{return replaceTilde(comp,options)}).join(" ");const replaceTilde=(comp,options)=>{const r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,(_,M,m,p,pr)=>{debug("tilde",comp,_,M,m,p,pr);let ret;if(isX(M)){ret=""}else if(isX(m)){ret=`>=${M}.0.0 <${+M+1}.0.0-0`}else if(isX(p)){ret=`>=${M}.${m}.0 <${M}.${+m+1}.0-0`}else if(pr){debug("replaceTilde pr",pr);ret=`>=${M}.${m}.${p}-${pr} <${M}.${+m+1}.0-0`}else{ret=`>=${M}.${m}.${p} <${M}.${+m+1}.0-0`}debug("tilde return",ret);return ret})};const replaceCarets=(comp,options)=>comp.trim().split(/\s+/).map(comp=>{return replaceCaret(comp,options)}).join(" ");const replaceCaret=(comp,options)=>{debug("caret",comp,options);const r=options.loose?re[t.CARETLOOSE]:re[t.CARET];const z=options.includePrerelease?"-0":"";return comp.replace(r,(_,M,m,p,pr)=>{debug("caret",comp,_,M,m,p,pr);let ret;if(isX(M)){ret=""}else if(isX(m)){ret=`>=${M}.0.0${z} <${+M+1}.0.0-0`}else if(isX(p)){if(M==="0"){ret=`>=${M}.${m}.0${z} <${M}.${+m+1}.0-0`}else{ret=`>=${M}.${m}.0${z} <${+M+1}.0.0-0`}}else if(pr){debug("replaceCaret pr",pr);if(M==="0"){if(m==="0"){ret=`>=${M}.${m}.${p}-${pr} <${M}.${m}.${+p+1}-0`}else{ret=`>=${M}.${m}.${p}-${pr} <${M}.${+m+1}.0-0`}}else{ret=`>=${M}.${m}.${p}-${pr} <${+M+1}.0.0-0`}}else{debug("no pr");if(M==="0"){if(m==="0"){ret=`>=${M}.${m}.${p}${z} <${M}.${m}.${+p+1}-0`}else{ret=`>=${M}.${m}.${p}${z} <${M}.${+m+1}.0-0`}}else{ret=`>=${M}.${m}.${p} <${+M+1}.0.0-0`}}debug("caret return",ret);return ret})};const replaceXRanges=(comp,options)=>{debug("replaceXRanges",comp,options);return comp.split(/\s+/).map(comp=>{return replaceXRange(comp,options)}).join(" ")};const replaceXRange=(comp,options)=>{comp=comp.trim();const r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,(ret,gtlt,M,m,p,pr)=>{debug("xRange",comp,ret,gtlt,M,m,p,pr);const xM=isX(M);const xm=xM||isX(m);const xp=xm||isX(p);const anyX=xp;if(gtlt==="="&&anyX){gtlt=""}pr=options.includePrerelease?"-0":"";if(xM){if(gtlt===">"||gtlt==="<"){ret="<0.0.0-0"}else{ret="*"}}else if(gtlt&&anyX){if(xm){m=0}p=0;if(gtlt===">"){gtlt=">=";if(xm){M=+M+1;m=0;p=0}else{m=+m+1;p=0}}else if(gtlt==="<="){gtlt="<";if(xm){M=+M+1}else{m=+m+1}}if(gtlt==="<")pr="-0";ret=`${gtlt+M}.${m}.${p}${pr}`}else if(xm){ret=`>=${M}.0.0${pr} <${+M+1}.0.0-0`}else if(xp){ret=`>=${M}.${m}.0${pr} <${M}.${+m+1}.0-0`}debug("xRange return",ret);return ret})};const replaceStars=(comp,options)=>{debug("replaceStars",comp,options);return comp.trim().replace(re[t.STAR],"")};const replaceGTE0=(comp,options)=>{debug("replaceGTE0",comp,options);return comp.trim().replace(re[options.includePrerelease?t.GTE0PRE:t.GTE0],"")};const hyphenReplace=incPr=>($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb)=>{if(isX(fM)){from=""}else if(isX(fm)){from=`>=${fM}.0.0${incPr?"-0":""}`}else if(isX(fp)){from=`>=${fM}.${fm}.0${incPr?"-0":""}`}else if(fpr){from=`>=${from}`}else{from=`>=${from}${incPr?"-0":""}`}if(isX(tM)){to=""}else if(isX(tm)){to=`<${+tM+1}.0.0-0`}else if(isX(tp)){to=`<${tM}.${+tm+1}.0-0`}else if(tpr){to=`<=${tM}.${tm}.${tp}-${tpr}`}else if(incPr){to=`<${tM}.${tm}.${+tp+1}-0`}else{to=`<=${to}`}return`${from} ${to}`.trim()};const testSet=(set,version,options)=>{for(let i=0;i<set.length;i++){if(!set[i].test(version)){return false}}if(version.prerelease.length&&!options.includePrerelease){for(let i=0;i<set.length;i++){debug(set[i].semver);if(set[i].semver===Comparator.ANY){continue}if(set[i].semver.prerelease.length>0){const allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch){return true}}}return false}return true}},{"../internal/debug":37,"../internal/parse-options":39,"../internal/re":40,"./comparator":8,"./semver":10,"lru-cache":61}],10:[function(require,module,exports){const debug=require("../internal/debug");const{MAX_LENGTH,MAX_SAFE_INTEGER}=require("../internal/constants");const{re,t}=require("../internal/re");const parseOptions=require("../internal/parse-options");const{compareIdentifiers}=require("../internal/identifiers");class SemVer{constructor(version,options){options=parseOptions(options);if(version instanceof SemVer){if(version.loose===!!options.loose&&version.includePrerelease===!!options.includePrerelease){return version}else{version=version.version}}else if(typeof version!=="string"){throw new TypeError(`Invalid Version: ${version}`)}if(version.length>MAX_LENGTH){throw new TypeError(`version is longer than ${MAX_LENGTH} characters`)}debug("SemVer",version,options);this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;const m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m){throw new TypeError(`Invalid Version: ${version}`)}this.raw=version;this.major=+m[1];this.minor=+m[2];this.patch=+m[3];if(this.major>MAX_SAFE_INTEGER||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>MAX_SAFE_INTEGER||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>MAX_SAFE_INTEGER||this.patch<0){throw new TypeError("Invalid patch version")}if(!m[4]){this.prerelease=[]}else{this.prerelease=m[4].split(".").map(id=>{if(/^[0-9]+$/.test(id)){const num=+id;if(num>=0&&num<MAX_SAFE_INTEGER){return num}}return id})}this.build=m[5]?m[5].split("."):[];this.format()}format(){this.version=`${this.major}.${this.minor}.${this.patch}`;if(this.prerelease.length){this.version+=`-${this.prerelease.join(".")}`}return this.version}toString(){return this.version}compare(other){debug("SemVer.compare",this.version,this.options,other);if(!(other instanceof SemVer)){if(typeof other==="string"&&other===this.version){return 0}other=new SemVer(other,this.options)}if(other.version===this.version){return 0}return this.compareMain(other)||this.comparePre(other)}compareMain(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}return compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)}comparePre(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}if(this.prerelease.length&&!other.prerelease.length){return-1}else if(!this.prerelease.length&&other.prerelease.length){return 1}else if(!this.prerelease.length&&!other.prerelease.length){return 0}let i=0;do{const a=this.prerelease[i];const b=other.prerelease[i];debug("prerelease compare",i,a,b);if(a===undefined&&b===undefined){return 0}else if(b===undefined){return 1}else if(a===undefined){return-1}else if(a===b){continue}else{return compareIdentifiers(a,b)}}while(++i)}compareBuild(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}let i=0;do{const a=this.build[i];const b=other.build[i];debug("prerelease compare",i,a,b);if(a===undefined&&b===undefined){return 0}else if(b===undefined){return 1}else if(a===undefined){return-1}else if(a===b){continue}else{return compareIdentifiers(a,b)}}while(++i)}inc(release,identifier){switch(release){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0;this.inc("patch",identifier);this.inc("pre",identifier);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",identifier)}this.inc("pre",identifier);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0]}else{let i=this.prerelease.length;while(--i>=0){if(typeof this.prerelease[i]==="number"){this.prerelease[i]++;i=-2}}if(i===-1){this.prerelease.push(0)}}if(identifier){if(this.prerelease[0]===identifier){if(isNaN(this.prerelease[1])){this.prerelease=[identifier,0]}}else{this.prerelease=[identifier,0]}}break;default:throw new Error(`invalid increment argument: ${release}`)}this.format();this.raw=this.version;return this}}module.exports=SemVer},{"../internal/constants":36,"../internal/debug":37,"../internal/identifiers":38,"../internal/parse-options":39,"../internal/re":40}],11:[function(require,module,exports){const parse=require("./parse");const clean=(version,options)=>{const s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null};module.exports=clean},{"./parse":27}],12:[function(require,module,exports){const eq=require("./eq");const neq=require("./neq");const gt=require("./gt");const gte=require("./gte");const lt=require("./lt");const lte=require("./lte");const cmp=(a,op,b,loose)=>{switch(op){case"===":if(typeof a==="object")a=a.version;if(typeof b==="object")b=b.version;return a===b;case"!==":if(typeof a==="object")a=a.version;if(typeof b==="object")b=b.version;return a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError(`Invalid operator: ${op}`)}};module.exports=cmp},{"./eq":18,"./gt":19,"./gte":20,"./lt":22,"./lte":23,"./neq":26}],13:[function(require,module,exports){const SemVer=require("../classes/semver");const parse=require("./parse");const{re,t}=require("../internal/re");const coerce=(version,options)=>{if(version instanceof SemVer){return version}if(typeof version==="number"){version=String(version)}if(typeof version!=="string"){return null}options=options||{};let match=null;if(!options.rtl){match=version.match(re[t.COERCE])}else{let next;while((next=re[t.COERCERTL].exec(version))&&(!match||match.index+match[0].length!==version.length)){if(!match||next.index+next[0].length!==match.index+match[0].length){match=next}re[t.COERCERTL].lastIndex=next.index+next[1].length+next[2].length}re[t.COERCERTL].lastIndex=-1}if(match===null)return null;return parse(`${match[2]}.${match[3]||"0"}.${match[4]||"0"}`,options)};module.exports=coerce},{"../classes/semver":10,"../internal/re":40,"./parse":27}],14:[function(require,module,exports){const SemVer=require("../classes/semver");const compareBuild=(a,b,loose)=>{const versionA=new SemVer(a,loose);const versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB)};module.exports=compareBuild},{"../classes/semver":10}],15:[function(require,module,exports){const compare=require("./compare");const compareLoose=(a,b)=>compare(a,b,true);module.exports=compareLoose},{"./compare":16}],16:[function(require,module,exports){const SemVer=require("../classes/semver");const compare=(a,b,loose)=>new SemVer(a,loose).compare(new SemVer(b,loose));module.exports=compare},{"../classes/semver":10}],17:[function(require,module,exports){const parse=require("./parse");const eq=require("./eq");const diff=(version1,version2)=>{if(eq(version1,version2)){return null}else{const v1=parse(version1);const v2=parse(version2);const hasPre=v1.prerelease.length||v2.prerelease.length;const prefix=hasPre?"pre":"";const defaultResult=hasPre?"prerelease":"";for(const key in v1){if(key==="major"||key==="minor"||key==="patch"){if(v1[key]!==v2[key]){return prefix+key}}}return defaultResult}};module.exports=diff},{"./eq":18,"./parse":27}],18:[function(require,module,exports){const compare=require("./compare");const eq=(a,b,loose)=>compare(a,b,loose)===0;module.exports=eq},{"./compare":16}],19:[function(require,module,exports){const compare=require("./compare");const gt=(a,b,loose)=>compare(a,b,loose)>0;module.exports=gt},{"./compare":16}],20:[function(require,module,exports){const compare=require("./compare");const gte=(a,b,loose)=>compare(a,b,loose)>=0;module.exports=gte},{"./compare":16}],21:[function(require,module,exports){const SemVer=require("../classes/semver");const inc=(version,release,options,identifier)=>{if(typeof options==="string"){identifier=options;options=undefined}try{return new SemVer(version,options).inc(release,identifier).version}catch(er){return null}};module.exports=inc},{"../classes/semver":10}],22:[function(require,module,exports){const compare=require("./compare");const lt=(a,b,loose)=>compare(a,b,loose)<0;module.exports=lt},{"./compare":16}],23:[function(require,module,exports){const compare=require("./compare");const lte=(a,b,loose)=>compare(a,b,loose)<=0;module.exports=lte},{"./compare":16}],24:[function(require,module,exports){const SemVer=require("../classes/semver");const major=(a,loose)=>new SemVer(a,loose).major;module.exports=major},{"../classes/semver":10}],25:[function(require,module,exports){const SemVer=require("../classes/semver");const minor=(a,loose)=>new SemVer(a,loose).minor;module.exports=minor},{"../classes/semver":10}],26:[function(require,module,exports){const compare=require("./compare");const neq=(a,b,loose)=>compare(a,b,loose)!==0;module.exports=neq},{"./compare":16}],27:[function(require,module,exports){const{MAX_LENGTH}=require("../internal/constants");const{re,t}=require("../internal/re");const SemVer=require("../classes/semver");const parseOptions=require("../internal/parse-options");const parse=(version,options)=>{options=parseOptions(options);if(version instanceof SemVer){return version}if(typeof version!=="string"){return null}if(version.length>MAX_LENGTH){return null}const r=options.loose?re[t.LOOSE]:re[t.FULL];if(!r.test(version)){return null}try{return new SemVer(version,options)}catch(er){return null}};module.exports=parse},{"../classes/semver":10,"../internal/constants":36,"../internal/parse-options":39,"../internal/re":40}],28:[function(require,module,exports){const SemVer=require("../classes/semver");const patch=(a,loose)=>new SemVer(a,loose).patch;module.exports=patch},{"../classes/semver":10}],29:[function(require,module,exports){const parse=require("./parse");const prerelease=(version,options)=>{const parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null};module.exports=prerelease},{"./parse":27}],30:[function(require,module,exports){const compare=require("./compare");const rcompare=(a,b,loose)=>compare(b,a,loose);module.exports=rcompare},{"./compare":16}],31:[function(require,module,exports){const compareBuild=require("./compare-build");const rsort=(list,loose)=>list.sort((a,b)=>compareBuild(b,a,loose));module.exports=rsort},{"./compare-build":14}],32:[function(require,module,exports){const Range=require("../classes/range");const satisfies=(version,range,options)=>{try{range=new Range(range,options)}catch(er){return false}return range.test(version)};module.exports=satisfies},{"../classes/range":9}],33:[function(require,module,exports){const compareBuild=require("./compare-build");const sort=(list,loose)=>list.sort((a,b)=>compareBuild(a,b,loose));module.exports=sort},{"./compare-build":14}],34:[function(require,module,exports){const parse=require("./parse");const valid=(version,options)=>{const v=parse(version,options);return v?v.version:null};module.exports=valid},{"./parse":27}],35:[function(require,module,exports){const internalRe=require("./internal/re");module.exports={re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:require("./internal/constants").SEMVER_SPEC_VERSION,SemVer:require("./classes/semver"),compareIdentifiers:require("./internal/identifiers").compareIdentifiers,rcompareIdentifiers:require("./internal/identifiers").rcompareIdentifiers,parse:require("./functions/parse"),valid:require("./functions/valid"),clean:require("./functions/clean"),inc:require("./functions/inc"),diff:require("./functions/diff"),major:require("./functions/major"),minor:require("./functions/minor"),patch:require("./functions/patch"),prerelease:require("./functions/prerelease"),compare:require("./functions/compare"),rcompare:require("./functions/rcompare"),compareLoose:require("./functions/compare-loose"),compareBuild:require("./functions/compare-build"),sort:require("./functions/sort"),rsort:require("./functions/rsort"),gt:require("./functions/gt"),lt:require("./functions/lt"),eq:require("./functions/eq"),neq:require("./functions/neq"),gte:require("./functions/gte"),lte:require("./functions/lte"),cmp:require("./functions/cmp"),coerce:require("./functions/coerce"),Comparator:require("./classes/comparator"),Range:require("./classes/range"),satisfies:require("./functions/satisfies"),toComparators:require("./ranges/to-comparators"),maxSatisfying:require("./ranges/max-satisfying"),minSatisfying:require("./ranges/min-satisfying"),minVersion:require("./ranges/min-version"),validRange:require("./ranges/valid"),outside:require("./ranges/outside"),gtr:require("./ranges/gtr"),ltr:require("./ranges/ltr"),intersects:require("./ranges/intersects"),simplifyRange:require("./ranges/simplify"),subset:require("./ranges/subset")}},{"./classes/comparator":8,"./classes/range":9,"./classes/semver":10,"./functions/clean":11,"./functions/cmp":12,"./functions/coerce":13,"./functions/compare":16,"./functions/compare-build":14,"./functions/compare-loose":15,"./functions/diff":17,"./functions/eq":18,"./functions/gt":19,"./functions/gte":20,"./functions/inc":21,"./functions/lt":22,"./functions/lte":23,"./functions/major":24,"./functions/minor":25,"./functions/neq":26,"./functions/parse":27,"./functions/patch":28,"./functions/prerelease":29,"./functions/rcompare":30,"./functions/rsort":31,"./functions/satisfies":32,"./functions/sort":33,"./functions/valid":34,"./internal/constants":36,"./internal/identifiers":38,"./internal/re":40,"./ranges/gtr":41,"./ranges/intersects":42,"./ranges/ltr":43,"./ranges/max-satisfying":44,"./ranges/min-satisfying":45,"./ranges/min-version":46,"./ranges/outside":47,"./ranges/simplify":48,"./ranges/subset":49,"./ranges/to-comparators":50,"./ranges/valid":51}],36:[function(require,module,exports){const SEMVER_SPEC_VERSION="2.0.0";const MAX_LENGTH=256;const MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;const MAX_SAFE_COMPONENT_LENGTH=16;module.exports={SEMVER_SPEC_VERSION:SEMVER_SPEC_VERSION,MAX_LENGTH:MAX_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,MAX_SAFE_COMPONENT_LENGTH:MAX_SAFE_COMPONENT_LENGTH}},{}],37:[function(require,module,exports){(function(process){(function(){const debug=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...args)=>console.error("SEMVER",...args):()=>{};module.exports=debug}).call(this)}).call(this,require("_process"))},{_process:5}],38:[function(require,module,exports){const numeric=/^[0-9]+$/;const compareIdentifiers=(a,b)=>{const anum=numeric.test(a);const bnum=numeric.test(b);if(anum&&bnum){a=+a;b=+b}return a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1};const rcompareIdentifiers=(a,b)=>compareIdentifiers(b,a);module.exports={compareIdentifiers:compareIdentifiers,rcompareIdentifiers:rcompareIdentifiers}},{}],39:[function(require,module,exports){const opts=["includePrerelease","loose","rtl"];const parseOptions=options=>!options?{}:typeof options!=="object"?{loose:true}:opts.filter(k=>options[k]).reduce((options,k)=>{options[k]=true;return options},{});module.exports=parseOptions},{}],40:[function(require,module,exports){const{MAX_SAFE_COMPONENT_LENGTH}=require("./constants");const debug=require("./debug");exports=module.exports={};const re=exports.re=[];const src=exports.src=[];const t=exports.t={};let R=0;const createToken=(name,value,isGlobal)=>{const index=R++;debug(index,value);t[name]=index;src[index]=value;re[index]=new RegExp(value,isGlobal?"g":undefined)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*");createToken("NUMERICIDENTIFIERLOOSE","[0-9]+");createToken("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");createToken("MAINVERSION",`(${src[t.NUMERICIDENTIFIER]})\\.`+`(${src[t.NUMERICIDENTIFIER]})\\.`+`(${src[t.NUMERICIDENTIFIER]})`);createToken("MAINVERSIONLOOSE",`(${src[t.NUMERICIDENTIFIERLOOSE]})\\.`+`(${src[t.NUMERICIDENTIFIERLOOSE]})\\.`+`(${src[t.NUMERICIDENTIFIERLOOSE]})`);createToken("PRERELEASEIDENTIFIER",`(?:${src[t.NUMERICIDENTIFIER]}|${src[t.NONNUMERICIDENTIFIER]})`);createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${src[t.NUMERICIDENTIFIERLOOSE]}|${src[t.NONNUMERICIDENTIFIER]})`);createToken("PRERELEASE",`(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\.${src[t.PRERELEASEIDENTIFIER]})*))`);createToken("PRERELEASELOOSE",`(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`);createToken("BUILDIDENTIFIER","[0-9A-Za-z-]+");createToken("BUILD",`(?:\\+(${src[t.BUILDIDENTIFIER]}(?:\\.${src[t.BUILDIDENTIFIER]})*))`);createToken("FULLPLAIN",`v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`);createToken("FULL",`^${src[t.FULLPLAIN]}$`);createToken("LOOSEPLAIN",`[v=\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`);createToken("LOOSE",`^${src[t.LOOSEPLAIN]}$`);createToken("GTLT","((?:<|>)?=?)");createToken("XRANGEIDENTIFIERLOOSE",`${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);createToken("XRANGEIDENTIFIER",`${src[t.NUMERICIDENTIFIER]}|x|X|\\*`);createToken("XRANGEPLAIN",`[v=\\s]*(${src[t.XRANGEIDENTIFIER]})`+`(?:\\.(${src[t.XRANGEIDENTIFIER]})`+`(?:\\.(${src[t.XRANGEIDENTIFIER]})`+`(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?`+`)?)?`);createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})`+`(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?`+`)?)?`);createToken("XRANGE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAIN]}$`);createToken("XRANGELOOSE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAINLOOSE]}$`);createToken("COERCE",`${"(^|[^\\d])"+"(\\d{1,"}${MAX_SAFE_COMPONENT_LENGTH}})`+`(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`+`(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`+`(?:$|[^\\d])`);createToken("COERCERTL",src[t.COERCE],true);createToken("LONETILDE","(?:~>?)");createToken("TILDETRIM",`(\\s*)${src[t.LONETILDE]}\\s+`,true);exports.tildeTrimReplace="$1~";createToken("TILDE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`);createToken("TILDELOOSE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`);createToken("LONECARET","(?:\\^)");createToken("CARETTRIM",`(\\s*)${src[t.LONECARET]}\\s+`,true);exports.caretTrimReplace="$1^";createToken("CARET",`^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`);createToken("CARETLOOSE",`^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`);createToken("COMPARATORLOOSE",`^${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]})$|^$`);createToken("COMPARATOR",`^${src[t.GTLT]}\\s*(${src[t.FULLPLAIN]})$|^$`);createToken("COMPARATORTRIM",`(\\s*)${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`,true);exports.comparatorTrimReplace="$1$2$3";createToken("HYPHENRANGE",`^\\s*(${src[t.XRANGEPLAIN]})`+`\\s+-\\s+`+`(${src[t.XRANGEPLAIN]})`+`\\s*$`);createToken("HYPHENRANGELOOSE",`^\\s*(${src[t.XRANGEPLAINLOOSE]})`+`\\s+-\\s+`+`(${src[t.XRANGEPLAINLOOSE]})`+`\\s*$`);createToken("STAR","(<|>)?=?\\s*\\*");createToken("GTE0","^\\s*>=\\s*0.0.0\\s*$");createToken("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},{"./constants":36,"./debug":37}],41:[function(require,module,exports){const outside=require("./outside");const gtr=(version,range,options)=>outside(version,range,">",options);module.exports=gtr},{"./outside":47}],42:[function(require,module,exports){const Range=require("../classes/range");const intersects=(r1,r2,options)=>{r1=new Range(r1,options);r2=new Range(r2,options);return r1.intersects(r2)};module.exports=intersects},{"../classes/range":9}],43:[function(require,module,exports){const outside=require("./outside");const ltr=(version,range,options)=>outside(version,range,"<",options);module.exports=ltr},{"./outside":47}],44:[function(require,module,exports){const SemVer=require("../classes/semver");const Range=require("../classes/range");const maxSatisfying=(versions,range,options)=>{let max=null;let maxSV=null;let rangeObj=null;try{rangeObj=new Range(range,options)}catch(er){return null}versions.forEach(v=>{if(rangeObj.test(v)){if(!max||maxSV.compare(v)===-1){max=v;maxSV=new SemVer(max,options)}}});return max};module.exports=maxSatisfying},{"../classes/range":9,"../classes/semver":10}],45:[function(require,module,exports){const SemVer=require("../classes/semver");const Range=require("../classes/range");const minSatisfying=(versions,range,options)=>{let min=null;let minSV=null;let rangeObj=null;try{rangeObj=new Range(range,options)}catch(er){return null}versions.forEach(v=>{if(rangeObj.test(v)){if(!min||minSV.compare(v)===1){min=v;minSV=new SemVer(min,options)}}});return min};module.exports=minSatisfying},{"../classes/range":9,"../classes/semver":10}],46:[function(require,module,exports){const SemVer=require("../classes/semver");const Range=require("../classes/range");const gt=require("../functions/gt");const minVersion=(range,loose)=>{range=new Range(range,loose);let minver=new SemVer("0.0.0");if(range.test(minver)){return minver}minver=new SemVer("0.0.0-0");if(range.test(minver)){return minver}minver=null;for(let i=0;i<range.set.length;++i){const comparators=range.set[i];let setMin=null;comparators.forEach(comparator=>{const compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":if(compver.prerelease.length===0){compver.patch++}else{compver.prerelease.push(0)}compver.raw=compver.format();case"":case">=":if(!setMin||gt(compver,setMin)){setMin=compver}break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${comparator.operator}`)}});if(setMin&&(!minver||gt(minver,setMin)))minver=setMin}if(minver&&range.test(minver)){return minver}return null};module.exports=minVersion},{"../classes/range":9,"../classes/semver":10,"../functions/gt":19}],47:[function(require,module,exports){const SemVer=require("../classes/semver");const Comparator=require("../classes/comparator");const{ANY}=Comparator;const Range=require("../classes/range");const satisfies=require("../functions/satisfies");const gt=require("../functions/gt");const lt=require("../functions/lt");const lte=require("../functions/lte");const gte=require("../functions/gte");const outside=(version,range,hilo,options)=>{version=new SemVer(version,options);range=new Range(range,options);let gtfn,ltefn,ltfn,comp,ecomp;switch(hilo){case">":gtfn=gt;ltefn=lte;ltfn=lt;comp=">";ecomp=">=";break;case"<":gtfn=lt;ltefn=gte;ltfn=gt;comp="<";ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options)){return false}for(let i=0;i<range.set.length;++i){const comparators=range.set[i];let high=null;let low=null;comparators.forEach(comparator=>{if(comparator.semver===ANY){comparator=new Comparator(">=0.0.0")}high=high||comparator;low=low||comparator;if(gtfn(comparator.semver,high.semver,options)){high=comparator}else if(ltfn(comparator.semver,low.semver,options)){low=comparator}});if(high.operator===comp||high.operator===ecomp){return false}if((!low.operator||low.operator===comp)&&ltefn(version,low.semver)){return false}else if(low.operator===ecomp&&ltfn(version,low.semver)){return false}}return true};module.exports=outside},{"../classes/comparator":8,"../classes/range":9,"../classes/semver":10,"../functions/gt":19,"../functions/gte":20,"../functions/lt":22,"../functions/lte":23,"../functions/satisfies":32}],48:[function(require,module,exports){const satisfies=require("../functions/satisfies.js");const compare=require("../functions/compare.js");module.exports=(versions,range,options)=>{const set=[];let min=null;let prev=null;const v=versions.sort((a,b)=>compare(a,b,options));for(const version of v){const included=satisfies(version,range,options);if(included){prev=version;if(!min)min=version}else{if(prev){set.push([min,prev])}prev=null;min=null}}if(min)set.push([min,null]);const ranges=[];for(const[min,max]of set){if(min===max)ranges.push(min);else if(!max&&min===v[0])ranges.push("*");else if(!max)ranges.push(`>=${min}`);else if(min===v[0])ranges.push(`<=${max}`);else ranges.push(`${min} - ${max}`)}const simplified=ranges.join(" || ");const original=typeof range.raw==="string"?range.raw:String(range);return simplified.length<original.length?simplified:range}},{"../functions/compare.js":16,"../functions/satisfies.js":32}],49:[function(require,module,exports){const Range=require("../classes/range.js");const Comparator=require("../classes/comparator.js");const{ANY}=Comparator;const satisfies=require("../functions/satisfies.js");const compare=require("../functions/compare.js");const subset=(sub,dom,options={})=>{if(sub===dom)return true;sub=new Range(sub,options);dom=new Range(dom,options);let sawNonNull=false;OUTER:for(const simpleSub of sub.set){for(const simpleDom of dom.set){const isSub=simpleSubset(simpleSub,simpleDom,options);sawNonNull=sawNonNull||isSub!==null;if(isSub)continue OUTER}if(sawNonNull)return false}return true};const simpleSubset=(sub,dom,options)=>{if(sub===dom)return true;if(sub.length===1&&sub[0].semver===ANY){if(dom.length===1&&dom[0].semver===ANY)return true;else if(options.includePrerelease)sub=[new Comparator(">=0.0.0-0")];else sub=[new Comparator(">=0.0.0")]}if(dom.length===1&&dom[0].semver===ANY){if(options.includePrerelease)return true;else dom=[new Comparator(">=0.0.0")]}const eqSet=new Set;let gt,lt;for(const c of sub){if(c.operator===">"||c.operator===">=")gt=higherGT(gt,c,options);else if(c.operator==="<"||c.operator==="<=")lt=lowerLT(lt,c,options);else eqSet.add(c.semver)}if(eqSet.size>1)return null;let gtltComp;if(gt&&lt){gtltComp=compare(gt.semver,lt.semver,options);if(gtltComp>0)return null;else if(gtltComp===0&&(gt.operator!==">="||lt.operator!=="<="))return null}for(const eq of eqSet){if(gt&&!satisfies(eq,String(gt),options))return null;if(lt&&!satisfies(eq,String(lt),options))return null;for(const c of dom){if(!satisfies(eq,String(c),options))return false}return true}let higher,lower;let hasDomLT,hasDomGT;let needDomLTPre=lt&&!options.includePrerelease&&lt.semver.prerelease.length?lt.semver:false;let needDomGTPre=gt&&!options.includePrerelease&&gt.semver.prerelease.length?gt.semver:false;if(needDomLTPre&&needDomLTPre.prerelease.length===1&&lt.operator==="<"&&needDomLTPre.prerelease[0]===0){needDomLTPre=false}for(const c of dom){hasDomGT=hasDomGT||c.operator===">"||c.operator===">=";hasDomLT=hasDomLT||c.operator==="<"||c.operator==="<=";if(gt){if(needDomGTPre){if(c.semver.prerelease&&c.semver.prerelease.length&&c.semver.major===needDomGTPre.major&&c.semver.minor===needDomGTPre.minor&&c.semver.patch===needDomGTPre.patch){needDomGTPre=false}}if(c.operator===">"||c.operator===">="){higher=higherGT(gt,c,options);if(higher===c&&higher!==gt)return false}else if(gt.operator===">="&&!satisfies(gt.semver,String(c),options))return false}if(lt){if(needDomLTPre){if(c.semver.prerelease&&c.semver.prerelease.length&&c.semver.major===needDomLTPre.major&&c.semver.minor===needDomLTPre.minor&&c.semver.patch===needDomLTPre.patch){needDomLTPre=false}}if(c.operator==="<"||c.operator==="<="){lower=lowerLT(lt,c,options);if(lower===c&&lower!==lt)return false}else if(lt.operator==="<="&&!satisfies(lt.semver,String(c),options))return false}if(!c.operator&&(lt||gt)&&gtltComp!==0)return false}if(gt&&hasDomLT&&!lt&&gtltComp!==0)return false;if(lt&&hasDomGT&&!gt&&gtltComp!==0)return false;if(needDomGTPre||needDomLTPre)return false;return true};const higherGT=(a,b,options)=>{if(!a)return b;const comp=compare(a.semver,b.semver,options);return comp>0?a:comp<0?b:b.operator===">"&&a.operator===">="?b:a};const lowerLT=(a,b,options)=>{if(!a)return b;const comp=compare(a.semver,b.semver,options);return comp<0?a:comp>0?b:b.operator==="<"&&a.operator==="<="?b:a};module.exports=subset},{"../classes/comparator.js":8,"../classes/range.js":9,"../functions/compare.js":16,"../functions/satisfies.js":32}],50:[function(require,module,exports){const Range=require("../classes/range");const toComparators=(range,options)=>new Range(range,options).set.map(comp=>comp.map(c=>c.value).join(" ").trim().split(" "));module.exports=toComparators},{"../classes/range":9}],51:[function(require,module,exports){const Range=require("../classes/range");const validRange=(range,options)=>{try{return new Range(range,options).range||"*"}catch(er){return null}};module.exports=validRange},{"../classes/range":9}],52:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var errorClasses={};var deserializers={};var addCustomErrorDeserializer=function(name,deserializer){deserializers[name]=deserializer};var createCustomErrorClass=function(name){var C=function CustomError(message,fields){Object.assign(this,fields);this.name=name;this.message=message||name;this.stack=(new Error).stack};C.prototype=new Error;errorClasses[name]=C;return C};var deserializeError=function(object){if(typeof object==="object"&&object){try{var msg=JSON.parse(object.message);if(msg.message&&msg.name){object=msg}}catch(e){}var error=void 0;if(typeof object.name==="string"){var name_1=object.name;var des=deserializers[name_1];if(des){error=des(object)}else{var constructor=name_1==="Error"?Error:errorClasses[name_1];if(!constructor){console.warn("deserializing an unknown class '"+name_1+"'");constructor=createCustomErrorClass(name_1)}error=Object.create(constructor.prototype);try{for(var prop in object){if(object.hasOwnProperty(prop)){error[prop]=object[prop]}}}catch(e){}}}else{error=new Error(object.message)}if(!error.stack&&Error.captureStackTrace){Error.captureStackTrace(error,deserializeError)}return error}return new Error(String(object))};var serializeError=function(value){if(!value)return value;if(typeof value==="object"){return destroyCircular(value,[])}if(typeof value==="function"){return"[Function: "+(value.name||"anonymous")+"]"}return value};function destroyCircular(from,seen){var to={};seen.push(from);for(var _i=0,_a=Object.keys(from);_i<_a.length;_i++){var key=_a[_i];var value=from[key];if(typeof value==="function"){continue}if(!value||typeof value!=="object"){to[key]=value;continue}if(seen.indexOf(from[key])===-1){to[key]=destroyCircular(from[key],seen.slice(0));continue}to[key]="[Circular]"}if(typeof from.name==="string"){to.name=from.name}if(typeof from.message==="string"){to.message=from.message}if(typeof from.stack==="string"){to.stack=from.stack}return to}var AccountNameRequiredError=createCustomErrorClass("AccountNameRequired");var AccountNotSupported=createCustomErrorClass("AccountNotSupported");var AmountRequired=createCustomErrorClass("AmountRequired");var BluetoothRequired=createCustomErrorClass("BluetoothRequired");var BtcUnmatchedApp=createCustomErrorClass("BtcUnmatchedApp");var CantOpenDevice=createCustomErrorClass("CantOpenDevice");var CashAddrNotSupported=createCustomErrorClass("CashAddrNotSupported");var CurrencyNotSupported=createCustomErrorClass("CurrencyNotSupported");var DeviceAppVerifyNotSupported=createCustomErrorClass("DeviceAppVerifyNotSupported");var DeviceGenuineSocketEarlyClose=createCustomErrorClass("DeviceGenuineSocketEarlyClose");var DeviceNotGenuineError=createCustomErrorClass("DeviceNotGenuine");var DeviceOnDashboardExpected=createCustomErrorClass("DeviceOnDashboardExpected");var DeviceOnDashboardUnexpected=createCustomErrorClass("DeviceOnDashboardUnexpected");var DeviceInOSUExpected=createCustomErrorClass("DeviceInOSUExpected");var DeviceHalted=createCustomErrorClass("DeviceHalted");var DeviceNameInvalid=createCustomErrorClass("DeviceNameInvalid");var DeviceSocketFail=createCustomErrorClass("DeviceSocketFail");var DeviceSocketNoBulkStatus=createCustomErrorClass("DeviceSocketNoBulkStatus");var DisconnectedDevice=createCustomErrorClass("DisconnectedDevice");var DisconnectedDeviceDuringOperation=createCustomErrorClass("DisconnectedDeviceDuringOperation");var EnpointConfigError=createCustomErrorClass("EnpointConfig");var EthAppPleaseEnableContractData=createCustomErrorClass("EthAppPleaseEnableContractData");var FeeEstimationFailed=createCustomErrorClass("FeeEstimationFailed");var FirmwareNotRecognized=createCustomErrorClass("FirmwareNotRecognized");var HardResetFail=createCustomErrorClass("HardResetFail");var InvalidXRPTag=createCustomErrorClass("InvalidXRPTag");var InvalidAddress=createCustomErrorClass("InvalidAddress");var InvalidAddressBecauseDestinationIsAlsoSource=createCustomErrorClass("InvalidAddressBecauseDestinationIsAlsoSource");var LatestMCUInstalledError=createCustomErrorClass("LatestMCUInstalledError");var UnknownMCU=createCustomErrorClass("UnknownMCU");var LedgerAPIError=createCustomErrorClass("LedgerAPIError");var LedgerAPIErrorWithMessage=createCustomErrorClass("LedgerAPIErrorWithMessage");var LedgerAPINotAvailable=createCustomErrorClass("LedgerAPINotAvailable");var ManagerAppAlreadyInstalledError=createCustomErrorClass("ManagerAppAlreadyInstalled");var ManagerAppRelyOnBTCError=createCustomErrorClass("ManagerAppRelyOnBTC");var ManagerAppDepInstallRequired=createCustomErrorClass("ManagerAppDepInstallRequired");var ManagerAppDepUninstallRequired=createCustomErrorClass("ManagerAppDepUninstallRequired");var ManagerDeviceLockedError=createCustomErrorClass("ManagerDeviceLocked");var ManagerFirmwareNotEnoughSpaceError=createCustomErrorClass("ManagerFirmwareNotEnoughSpace");var ManagerNotEnoughSpaceError=createCustomErrorClass("ManagerNotEnoughSpace");var ManagerUninstallBTCDep=createCustomErrorClass("ManagerUninstallBTCDep");var NetworkDown=createCustomErrorClass("NetworkDown");var NoAddressesFound=createCustomErrorClass("NoAddressesFound");var NotEnoughBalance=createCustomErrorClass("NotEnoughBalance");var NotEnoughBalanceToDelegate=createCustomErrorClass("NotEnoughBalanceToDelegate");var NotEnoughBalanceInParentAccount=createCustomErrorClass("NotEnoughBalanceInParentAccount");var NotEnoughSpendableBalance=createCustomErrorClass("NotEnoughSpendableBalance");var NotEnoughBalanceBecauseDestinationNotCreated=createCustomErrorClass("NotEnoughBalanceBecauseDestinationNotCreated");var NoAccessToCamera=createCustomErrorClass("NoAccessToCamera");var NotEnoughGas=createCustomErrorClass("NotEnoughGas");var NotSupportedLegacyAddress=createCustomErrorClass("NotSupportedLegacyAddress");var GasLessThanEstimate=createCustomErrorClass("GasLessThanEstimate");var PasswordsDontMatchError=createCustomErrorClass("PasswordsDontMatch");var PasswordIncorrectError=createCustomErrorClass("PasswordIncorrect");var RecommendSubAccountsToEmpty=createCustomErrorClass("RecommendSubAccountsToEmpty");var RecommendUndelegation=createCustomErrorClass("RecommendUndelegation");var TimeoutTagged=createCustomErrorClass("TimeoutTagged");var UnexpectedBootloader=createCustomErrorClass("UnexpectedBootloader");var MCUNotGenuineToDashboard=createCustomErrorClass("MCUNotGenuineToDashboard");var RecipientRequired=createCustomErrorClass("RecipientRequired");var UnavailableTezosOriginatedAccountReceive=createCustomErrorClass("UnavailableTezosOriginatedAccountReceive");var UnavailableTezosOriginatedAccountSend=createCustomErrorClass("UnavailableTezosOriginatedAccountSend");var UpdateFetchFileFail=createCustomErrorClass("UpdateFetchFileFail");var UpdateIncorrectHash=createCustomErrorClass("UpdateIncorrectHash");var UpdateIncorrectSig=createCustomErrorClass("UpdateIncorrectSig");var UpdateYourApp=createCustomErrorClass("UpdateYourApp");var UserRefusedDeviceNameChange=createCustomErrorClass("UserRefusedDeviceNameChange");var UserRefusedAddress=createCustomErrorClass("UserRefusedAddress");var UserRefusedFirmwareUpdate=createCustomErrorClass("UserRefusedFirmwareUpdate");var UserRefusedAllowManager=createCustomErrorClass("UserRefusedAllowManager");var UserRefusedOnDevice=createCustomErrorClass("UserRefusedOnDevice");var TransportOpenUserCancelled=createCustomErrorClass("TransportOpenUserCancelled");var TransportInterfaceNotAvailable=createCustomErrorClass("TransportInterfaceNotAvailable");var TransportRaceCondition=createCustomErrorClass("TransportRaceCondition");var TransportWebUSBGestureRequired=createCustomErrorClass("TransportWebUSBGestureRequired");var DeviceShouldStayInApp=createCustomErrorClass("DeviceShouldStayInApp");var WebsocketConnectionError=createCustomErrorClass("WebsocketConnectionError");var WebsocketConnectionFailed=createCustomErrorClass("WebsocketConnectionFailed");var WrongDeviceForAccount=createCustomErrorClass("WrongDeviceForAccount");var WrongAppForCurrency=createCustomErrorClass("WrongAppForCurrency");var ETHAddressNonEIP=createCustomErrorClass("ETHAddressNonEIP");var CantScanQRCode=createCustomErrorClass("CantScanQRCode");var FeeNotLoaded=createCustomErrorClass("FeeNotLoaded");var FeeRequired=createCustomErrorClass("FeeRequired");var FeeTooHigh=createCustomErrorClass("FeeTooHigh");var SyncError=createCustomErrorClass("SyncError");var PairingFailed=createCustomErrorClass("PairingFailed");var GenuineCheckFailed=createCustomErrorClass("GenuineCheckFailed");var LedgerAPI4xx=createCustomErrorClass("LedgerAPI4xx");var LedgerAPI5xx=createCustomErrorClass("LedgerAPI5xx");var FirmwareOrAppUpdateRequired=createCustomErrorClass("FirmwareOrAppUpdateRequired");var NoDBPathGiven=createCustomErrorClass("NoDBPathGiven");var DBWrongPassword=createCustomErrorClass("DBWrongPassword");var DBNotReset=createCustomErrorClass("DBNotReset");function TransportError(message,id){this.name="TransportError";this.message=message;this.stack=(new Error).stack;this.id=id}TransportError.prototype=new Error;addCustomErrorDeserializer("TransportError",function(e){return new TransportError(e.message,e.id)});var StatusCodes={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function getAltStatusMessage(code){switch(code){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=code&&code<=28671){return"Internal error, please report"}}function TransportStatusError(statusCode){this.name="TransportStatusError";var statusText=Object.keys(StatusCodes).find(function(k){return StatusCodes[k]===statusCode})||"UNKNOWN_ERROR";var smsg=getAltStatusMessage(statusCode)||statusText;var statusCodeStr=statusCode.toString(16);this.message="Ledger device: "+smsg+" (0x"+statusCodeStr+")";this.stack=(new Error).stack;this.statusCode=statusCode;this.statusText=statusText}TransportStatusError.prototype=new Error;addCustomErrorDeserializer("TransportStatusError",function(e){return new TransportStatusError(e.statusCode)});exports.AccountNameRequiredError=AccountNameRequiredError;exports.AccountNotSupported=AccountNotSupported;exports.AmountRequired=AmountRequired;exports.BluetoothRequired=BluetoothRequired;exports.BtcUnmatchedApp=BtcUnmatchedApp;exports.CantOpenDevice=CantOpenDevice;exports.CantScanQRCode=CantScanQRCode;exports.CashAddrNotSupported=CashAddrNotSupported;exports.CurrencyNotSupported=CurrencyNotSupported;exports.DBNotReset=DBNotReset;exports.DBWrongPassword=DBWrongPassword;exports.DeviceAppVerifyNotSupported=DeviceAppVerifyNotSupported;exports.DeviceGenuineSocketEarlyClose=DeviceGenuineSocketEarlyClose;exports.DeviceHalted=DeviceHalted;exports.DeviceInOSUExpected=DeviceInOSUExpected;exports.DeviceNameInvalid=DeviceNameInvalid;exports.DeviceNotGenuineError=DeviceNotGenuineError;exports.DeviceOnDashboardExpected=DeviceOnDashboardExpected;exports.DeviceOnDashboardUnexpected=DeviceOnDashboardUnexpected;exports.DeviceShouldStayInApp=DeviceShouldStayInApp;exports.DeviceSocketFail=DeviceSocketFail;exports.DeviceSocketNoBulkStatus=DeviceSocketNoBulkStatus;exports.DisconnectedDevice=DisconnectedDevice;exports.DisconnectedDeviceDuringOperation=DisconnectedDeviceDuringOperation;exports.ETHAddressNonEIP=ETHAddressNonEIP;exports.EnpointConfigError=EnpointConfigError;exports.EthAppPleaseEnableContractData=EthAppPleaseEnableContractData;exports.FeeEstimationFailed=FeeEstimationFailed;exports.FeeNotLoaded=FeeNotLoaded;exports.FeeRequired=FeeRequired;exports.FeeTooHigh=FeeTooHigh;exports.FirmwareNotRecognized=FirmwareNotRecognized;exports.FirmwareOrAppUpdateRequired=FirmwareOrAppUpdateRequired;exports.GasLessThanEstimate=GasLessThanEstimate;exports.GenuineCheckFailed=GenuineCheckFailed;exports.HardResetFail=HardResetFail;exports.InvalidAddress=InvalidAddress;exports.InvalidAddressBecauseDestinationIsAlsoSource=InvalidAddressBecauseDestinationIsAlsoSource;exports.InvalidXRPTag=InvalidXRPTag;exports.LatestMCUInstalledError=LatestMCUInstalledError;exports.LedgerAPI4xx=LedgerAPI4xx;exports.LedgerAPI5xx=LedgerAPI5xx;exports.LedgerAPIError=LedgerAPIError;exports.LedgerAPIErrorWithMessage=LedgerAPIErrorWithMessage;exports.LedgerAPINotAvailable=LedgerAPINotAvailable;exports.MCUNotGenuineToDashboard=MCUNotGenuineToDashboard;exports.ManagerAppAlreadyInstalledError=ManagerAppAlreadyInstalledError;exports.ManagerAppDepInstallRequired=ManagerAppDepInstallRequired;exports.ManagerAppDepUninstallRequired=ManagerAppDepUninstallRequired;exports.ManagerAppRelyOnBTCError=ManagerAppRelyOnBTCError;exports.ManagerDeviceLockedError=ManagerDeviceLockedError;exports.ManagerFirmwareNotEnoughSpaceError=ManagerFirmwareNotEnoughSpaceError;exports.ManagerNotEnoughSpaceError=ManagerNotEnoughSpaceError;exports.ManagerUninstallBTCDep=ManagerUninstallBTCDep;exports.NetworkDown=NetworkDown;exports.NoAccessToCamera=NoAccessToCamera;exports.NoAddressesFound=NoAddressesFound;exports.NoDBPathGiven=NoDBPathGiven;exports.NotEnoughBalance=NotEnoughBalance;exports.NotEnoughBalanceBecauseDestinationNotCreated=NotEnoughBalanceBecauseDestinationNotCreated;exports.NotEnoughBalanceInParentAccount=NotEnoughBalanceInParentAccount;exports.NotEnoughBalanceToDelegate=NotEnoughBalanceToDelegate;exports.NotEnoughGas=NotEnoughGas;exports.NotEnoughSpendableBalance=NotEnoughSpendableBalance;exports.NotSupportedLegacyAddress=NotSupportedLegacyAddress;exports.PairingFailed=PairingFailed;exports.PasswordIncorrectError=PasswordIncorrectError;exports.PasswordsDontMatchError=PasswordsDontMatchError;exports.RecipientRequired=RecipientRequired;exports.RecommendSubAccountsToEmpty=RecommendSubAccountsToEmpty;exports.RecommendUndelegation=RecommendUndelegation;exports.StatusCodes=StatusCodes;exports.SyncError=SyncError;exports.TimeoutTagged=TimeoutTagged;exports.TransportError=TransportError;exports.TransportInterfaceNotAvailable=TransportInterfaceNotAvailable;exports.TransportOpenUserCancelled=TransportOpenUserCancelled;exports.TransportRaceCondition=TransportRaceCondition;exports.TransportStatusError=TransportStatusError;exports.TransportWebUSBGestureRequired=TransportWebUSBGestureRequired;exports.UnavailableTezosOriginatedAccountReceive=UnavailableTezosOriginatedAccountReceive;exports.UnavailableTezosOriginatedAccountSend=UnavailableTezosOriginatedAccountSend;exports.UnexpectedBootloader=UnexpectedBootloader;exports.UnknownMCU=UnknownMCU;exports.UpdateFetchFileFail=UpdateFetchFileFail;exports.UpdateIncorrectHash=UpdateIncorrectHash;exports.UpdateIncorrectSig=UpdateIncorrectSig;exports.UpdateYourApp=UpdateYourApp;exports.UserRefusedAddress=UserRefusedAddress;exports.UserRefusedAllowManager=UserRefusedAllowManager;exports.UserRefusedDeviceNameChange=UserRefusedDeviceNameChange;exports.UserRefusedFirmwareUpdate=UserRefusedFirmwareUpdate;exports.UserRefusedOnDevice=UserRefusedOnDevice;exports.WebsocketConnectionError=WebsocketConnectionError;exports.WebsocketConnectionFailed=WebsocketConnectionFailed;exports.WrongAppForCurrency=WrongAppForCurrency;exports.WrongDeviceForAccount=WrongDeviceForAccount;exports.addCustomErrorDeserializer=addCustomErrorDeserializer;exports.createCustomErrorClass=createCustomErrorClass;exports.deserializeError=deserializeError;exports.getAltStatusMessage=getAltStatusMessage;exports.serializeError=serializeError},{}],53:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _u2fApi=require("u2f-api");var _hwTransport=_interopRequireDefault(require("@ledgerhq/hw-transport"));var _logs=require("@ledgerhq/logs");var _errors=require("@ledgerhq/errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function wrapU2FTransportError(originalError,message,id){const err=new _errors.TransportError(message,id);err.originalError=originalError;return err}function wrapApdu(apdu,key){const result=Buffer.alloc(apdu.length);for(let i=0;i<apdu.length;i++){result[i]=apdu[i]^key[i%key.length]}return result}const webSafe64=base64=>base64.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");const normal64=base64=>base64.replace(/-/g,"+").replace(/_/g,"/")+"==".substring(0,3*base64.length%4);function attemptExchange(apdu,timeoutMillis,scrambleKey,unwrap){const keyHandle=wrapApdu(apdu,scrambleKey);const challenge=Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex");const signRequest={version:"U2F_V2",keyHandle:webSafe64(keyHandle.toString("base64")),challenge:webSafe64(challenge.toString("base64")),appId:location.origin};(0,_logs.log)("apdu","=> "+apdu.toString("hex"));return(0,_u2fApi.sign)(signRequest,timeoutMillis/1e3).then(response=>{const{signatureData}=response;if(typeof signatureData==="string"){const data=Buffer.from(normal64(signatureData),"base64");let result;if(!unwrap){result=data}else{result=data.slice(5)}(0,_logs.log)("apdu","<= "+result.toString("hex"));return result}else{throw response}})}let transportInstances=[];function emitDisconnect(){transportInstances.forEach(t=>t.emit("disconnect"));transportInstances=[]}function isTimeoutU2FError(u2fError){return u2fError.metaData.code===5}class TransportU2F extends _hwTransport.default{static async open(_,_openTimeout=5e3){return new TransportU2F}constructor(){super();this.scrambleKey=void 0;this.unwrap=true;transportInstances.push(this)}async exchange(apdu){try{return await attemptExchange(apdu,this.exchangeTimeout,this.scrambleKey,this.unwrap)}catch(e){const isU2FError=typeof e.metaData==="object";if(isU2FError){if(isTimeoutU2FError(e)){emitDisconnect()}throw wrapU2FTransportError(e,"Failed to sign with Ledger device: U2F "+e.metaData.type,"U2F_"+e.metaData.code)}else{throw e}}}setScrambleKey(scrambleKey){this.scrambleKey=Buffer.from(scrambleKey,"ascii")}setUnwrap(unwrap){this.unwrap=unwrap}close(){return Promise.resolve()}}exports.default=TransportU2F;TransportU2F.isSupported=_u2fApi.isSupported;TransportU2F.list=()=>(0,_u2fApi.isSupported)().then(supported=>supported?[null]:[]);TransportU2F.listen=observer=>{let unsubscribed=false;(0,_u2fApi.isSupported)().then(supported=>{if(unsubscribed)return;if(supported){observer.next({type:"add",descriptor:null});observer.complete()}else{observer.error(new _errors.TransportError("U2F browser support is needed for Ledger. "+"Please use Chrome, Opera or Firefox with a U2F extension. "+"Also make sure you're on an HTTPS connection","U2FNotSupported"))}});return{unsubscribe:()=>{unsubscribed=true}}}}).call(this)}).call(this,require("buffer").Buffer)},{"@ledgerhq/errors":52,"@ledgerhq/hw-transport":60,"@ledgerhq/logs":54,buffer:2,"u2f-api":63}],54:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.listen=exports.log=void 0;let id=0;const subscribers=[];const log=(type,message,data)=>{const obj={type:type,id:String(++id),date:new Date};if(message)obj.message=message;if(data)obj.data=data;dispatch(obj)};exports.log=log;const listen=cb=>{subscribers.push(cb);return()=>{const i=subscribers.indexOf(cb);if(i!==-1){subscribers[i]=subscribers[subscribers.length-1];subscribers.pop()}}};exports.listen=listen;function dispatch(log){for(let i=0;i<subscribers.length;i++){try{subscribers[i](log)}catch(e){console.error(e)}}}if(typeof window!=="undefined"){window.__ledgerLogsListen=listen}},{}],55:[function(require,module,exports){(function(global,Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _hwTransport=_interopRequireDefault(require("@ledgerhq/hw-transport"));var _hidFraming=_interopRequireDefault(require("@ledgerhq/devices/lib/hid-framing"));var _devices=require("@ledgerhq/devices");var _logs=require("@ledgerhq/logs");var _errors=require("@ledgerhq/errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const ledgerDevices=[{vendorId:_devices.ledgerUSBVendorId}];const isSupported=()=>Promise.resolve(!!(global.navigator&&global.navigator.hid));const getHID=()=>{const{hid}=navigator;if(!hid)throw new _errors.TransportError("navigator.hid is not supported","HIDNotSupported");return hid};async function requestLedgerDevices(){const device=await getHID().requestDevice({filters:ledgerDevices});if(Array.isArray(device))return device;return[device]}async function getLedgerDevices(){const devices=await getHID().getDevices();return devices.filter(d=>d.vendorId===_devices.ledgerUSBVendorId)}async function getFirstLedgerDevice(){const existingDevices=await getLedgerDevices();if(existingDevices.length>0)return existingDevices[0];const devices=await requestLedgerDevices();return devices[0]}class TransportWebHID extends _hwTransport.default{constructor(device){super();this.device=void 0;this.deviceModel=void 0;this.channel=Math.floor(Math.random()*65535);this.packetSize=64;this.inputs=[];this.inputCallback=void 0;this.read=()=>{if(this.inputs.length){return Promise.resolve(this.inputs.shift())}return new Promise(success=>{this.inputCallback=success})};this.onInputReport=e=>{const buffer=Buffer.from(e.data.buffer);if(this.inputCallback){this.inputCallback(buffer);this.inputCallback=null}else{this.inputs.push(buffer)}};this._disconnectEmitted=false;this._emitDisconnect=e=>{if(this._disconnectEmitted)return;this._disconnectEmitted=true;this.emit("disconnect",e)};this.exchange=apdu=>this.exchangeAtomicImpl(async()=>{const{channel,packetSize}=this;(0,_logs.log)("apdu","=> "+apdu.toString("hex"));const framing=(0,_hidFraming.default)(channel,packetSize);const blocks=framing.makeBlocks(apdu);for(let i=0;i<blocks.length;i++){await this.device.sendReport(0,blocks[i])}let result;let acc;while(!(result=framing.getReducedResult(acc))){const buffer=await this.read();acc=framing.reduceResponse(acc,buffer)}(0,_logs.log)("apdu","<= "+result.toString("hex"));return result}).catch(e=>{if(e&&e.message&&e.message.includes("write")){this._emitDisconnect(e);throw new _errors.DisconnectedDeviceDuringOperation(e.message)}throw e});this.device=device;this.deviceModel=(0,_devices.identifyUSBProductId)(device.productId);device.addEventListener("inputreport",this.onInputReport)}static async request(){const[device]=await requestLedgerDevices();return TransportWebHID.open(device)}static async openConnected(){const devices=await getLedgerDevices();if(devices.length===0)return null;return TransportWebHID.open(devices[0])}static async open(device){await device.open();const transport=new TransportWebHID(device);const onDisconnect=e=>{if(device===e.device){getHID().removeEventListener("disconnect",onDisconnect);transport._emitDisconnect(new _errors.DisconnectedDevice)}};getHID().addEventListener("disconnect",onDisconnect);return transport}async close(){await this.exchangeBusyPromise;this.device.removeEventListener("inputreport",this.onInputReport);await this.device.close()}setScrambleKey(){}}exports.default=TransportWebHID;TransportWebHID.isSupported=isSupported;TransportWebHID.list=getLedgerDevices;TransportWebHID.listen=observer=>{let unsubscribed=false;getFirstLedgerDevice().then(device=>{if(!device){observer.error(new _errors.TransportOpenUserCancelled("Access denied to use Ledger device"))}else if(!unsubscribed){const deviceModel=(0,_devices.identifyUSBProductId)(device.productId);observer.next({type:"add",descriptor:device,deviceModel:deviceModel});observer.complete()}},error=>{observer.error(new _errors.TransportOpenUserCancelled(error.message))});function unsubscribe(){unsubscribed=true}return{unsubscribe:unsubscribe}}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},require("buffer").Buffer)},{"@ledgerhq/devices":7,"@ledgerhq/devices/lib/hid-framing":6,"@ledgerhq/errors":52,"@ledgerhq/hw-transport":60,"@ledgerhq/logs":56,buffer:2}],56:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{dup:54}],57:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _hwTransport=_interopRequireDefault(require("@ledgerhq/hw-transport"));var _hidFraming=_interopRequireDefault(require("@ledgerhq/devices/lib/hid-framing"));var _devices=require("@ledgerhq/devices");var _logs=require("@ledgerhq/logs");var _errors=require("@ledgerhq/errors");var _webusb=require("./webusb");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const configurationValue=1;const endpointNumber=3;class TransportWebUSB extends _hwTransport.default{constructor(device,interfaceNumber){super();this.device=void 0;this.deviceModel=void 0;this.channel=Math.floor(Math.random()*65535);this.packetSize=64;this.interfaceNumber=void 0;this._disconnectEmitted=false;this._emitDisconnect=e=>{if(this._disconnectEmitted)return;this._disconnectEmitted=true;this.emit("disconnect",e)};this.exchange=apdu=>this.exchangeAtomicImpl(async()=>{const{channel,packetSize}=this;(0,_logs.log)("apdu","=> "+apdu.toString("hex"));const framing=(0,_hidFraming.default)(channel,packetSize);const blocks=framing.makeBlocks(apdu);for(let i=0;i<blocks.length;i++){await this.device.transferOut(endpointNumber,blocks[i])}let result;let acc;while(!(result=framing.getReducedResult(acc))){const r=await this.device.transferIn(endpointNumber,packetSize);const buffer=Buffer.from(r.data.buffer);acc=framing.reduceResponse(acc,buffer)}(0,_logs.log)("apdu","<= "+result.toString("hex"));return result}).catch(e=>{if(e&&e.message&&e.message.includes("disconnected")){this._emitDisconnect(e);throw new _errors.DisconnectedDeviceDuringOperation(e.message)}throw e});this.device=device;this.interfaceNumber=interfaceNumber;this.deviceModel=(0,_devices.identifyUSBProductId)(device.productId)}static async request(){const device=await(0,_webusb.requestLedgerDevice)();return TransportWebUSB.open(device)}static async openConnected(){const devices=await(0,_webusb.getLedgerDevices)();if(devices.length===0)return null;return TransportWebUSB.open(devices[0])}static async open(device){await device.open();if(device.configuration===null){await device.selectConfiguration(configurationValue)}await gracefullyResetDevice(device);const iface=device.configurations[0].interfaces.find(({alternates})=>alternates.some(a=>a.interfaceClass===255));if(!iface){throw new _errors.TransportInterfaceNotAvailable("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.")}const interfaceNumber=iface.interfaceNumber;try{await device.claimInterface(interfaceNumber)}catch(e){await device.close();throw new _errors.TransportInterfaceNotAvailable(e.message)}const transport=new TransportWebUSB(device,interfaceNumber);const onDisconnect=e=>{if(device===e.device){navigator.usb.removeEventListener("disconnect",onDisconnect);transport._emitDisconnect(new _errors.DisconnectedDevice)}};navigator.usb.addEventListener("disconnect",onDisconnect);return transport}async close(){await this.exchangeBusyPromise;await this.device.releaseInterface(this.interfaceNumber);await gracefullyResetDevice(this.device);await this.device.close()}setScrambleKey(){}}exports.default=TransportWebUSB;TransportWebUSB.isSupported=_webusb.isSupported;TransportWebUSB.list=_webusb.getLedgerDevices;TransportWebUSB.listen=observer=>{let unsubscribed=false;(0,_webusb.getFirstLedgerDevice)().then(device=>{if(!unsubscribed){const deviceModel=(0,_devices.identifyUSBProductId)(device.productId);observer.next({type:"add",descriptor:device,deviceModel:deviceModel});observer.complete()}},error=>{if(window.DOMException&&error instanceof window.DOMException&&error.code===18){observer.error(new _errors.TransportWebUSBGestureRequired(error.message))}else{observer.error(new _errors.TransportOpenUserCancelled(error.message))}});function unsubscribe(){unsubscribed=true}return{unsubscribe:unsubscribe}};async function gracefullyResetDevice(device){try{await device.reset()}catch(err){console.warn(err)}}}).call(this)}).call(this,require("buffer").Buffer)},{"./webusb":58,"@ledgerhq/devices":7,"@ledgerhq/devices/lib/hid-framing":6,"@ledgerhq/errors":52,"@ledgerhq/hw-transport":60,"@ledgerhq/logs":59,buffer:2}],58:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.requestLedgerDevice=requestLedgerDevice;exports.getLedgerDevices=getLedgerDevices;exports.getFirstLedgerDevice=getFirstLedgerDevice;exports.isSupported=void 0;var _devices=require("@ledgerhq/devices");const ledgerDevices=[{vendorId:_devices.ledgerUSBVendorId}];async function requestLedgerDevice(){const device=await navigator.usb.requestDevice({filters:ledgerDevices});return device}async function getLedgerDevices(){const devices=await navigator.usb.getDevices();return devices.filter(d=>d.vendorId===_devices.ledgerUSBVendorId)}async function getFirstLedgerDevice(){const existingDevices=await getLedgerDevices();if(existingDevices.length>0)return existingDevices[0];return requestLedgerDevice()}const isSupported=()=>Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices==="function");exports.isSupported=isSupported},{"@ledgerhq/devices":7}],59:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{dup:54}],60:[function(require,module,exports){(function(Buffer){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TransportError",{enumerable:true,get:function(){return _errors.TransportError}});Object.defineProperty(exports,"StatusCodes",{enumerable:true,get:function(){return _errors.StatusCodes}});Object.defineProperty(exports,"getAltStatusMessage",{enumerable:true,get:function(){return _errors.getAltStatusMessage}});Object.defineProperty(exports,"TransportStatusError",{enumerable:true,get:function(){return _errors.TransportStatusError}});exports.default=void 0;var _events=_interopRequireDefault(require("events"));var _errors=require("@ledgerhq/errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}class Transport{constructor(){this.exchangeTimeout=3e4;this.unresponsiveTimeout=15e3;this.deviceModel=null;this._events=new _events.default;this.send=async(cla,ins,p1,p2,data=Buffer.alloc(0),statusList=[_errors.StatusCodes.OK])=>{if(data.length>=256){throw new _errors.TransportError("data.length exceed 256 bytes limit. Got: "+data.length,"DataLengthTooBig")}const response=await this.exchange(Buffer.concat([Buffer.from([cla,ins,p1,p2]),Buffer.from([data.length]),data]));const sw=response.readUInt16BE(response.length-2);if(!statusList.some(s=>s===sw)){throw new _errors.TransportStatusError(sw)}return response};this.exchangeBusyPromise=void 0;this.exchangeAtomicImpl=async f=>{if(this.exchangeBusyPromise){throw new _errors.TransportRaceCondition("An action was already pending on the Ledger device. Please deny or reconnect.")}let resolveBusy;const busyPromise=new Promise(r=>{resolveBusy=r});this.exchangeBusyPromise=busyPromise;let unresponsiveReached=false;const timeout=setTimeout(()=>{unresponsiveReached=true;this.emit("unresponsive")},this.unresponsiveTimeout);try{const res=await f();if(unresponsiveReached){this.emit("responsive")}return res}finally{clearTimeout(timeout);if(resolveBusy)resolveBusy();this.exchangeBusyPromise=null}};this._appAPIlock=null}exchange(_apdu){throw new Error("exchange not implemented")}setScrambleKey(_key){}close(){return Promise.resolve()}on(eventName,cb){this._events.on(eventName,cb)}off(eventName,cb){this._events.removeListener(eventName,cb)}emit(event,...args){this._events.emit(event,...args)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(exchangeTimeout){this.exchangeTimeout=exchangeTimeout}setExchangeUnresponsiveTimeout(unresponsiveTimeout){this.unresponsiveTimeout=unresponsiveTimeout}static create(openTimeout=3e3,listenTimeout){return new Promise((resolve,reject)=>{let found=false;const sub=this.listen({next:e=>{found=true;if(sub)sub.unsubscribe();if(listenTimeoutId)clearTimeout(listenTimeoutId);this.open(e.descriptor,openTimeout).then(resolve,reject)},error:e=>{if(listenTimeoutId)clearTimeout(listenTimeoutId);reject(e)},complete:()=>{if(listenTimeoutId)clearTimeout(listenTimeoutId);if(!found){reject(new _errors.TransportError(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}});const listenTimeoutId=listenTimeout?setTimeout(()=>{sub.unsubscribe();reject(new _errors.TransportError(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},listenTimeout):null})}decorateAppAPIMethods(self,methods,scrambleKey){for(let methodName of methods){self[methodName]=this.decorateAppAPIMethod(methodName,self[methodName],self,scrambleKey)}}decorateAppAPIMethod(methodName,f,ctx,scrambleKey){return async(...args)=>{const{_appAPIlock}=this;if(_appAPIlock){return Promise.reject(new _errors.TransportError("Ledger Device is busy (lock "+_appAPIlock+")","TransportLocked"))}try{this._appAPIlock=methodName;this.setScrambleKey(scrambleKey);return await f.apply(ctx,args)}finally{this._appAPIlock=null}}}}exports.default=Transport;Transport.isSupported=void 0;Transport.list=void 0;Transport.listen=void 0;Transport.open=void 0;Transport.ErrorMessage_ListenTimeout="No Ledger device found (timeout)";Transport.ErrorMessage_NoDeviceFound="No Ledger device found"}).call(this)}).call(this,require("buffer").Buffer)},{"@ledgerhq/errors":52,buffer:2,events:3}],61:[function(require,module,exports){"use strict";const Yallist=require("yallist");const MAX=Symbol("max");const LENGTH=Symbol("length");const LENGTH_CALCULATOR=Symbol("lengthCalculator");const ALLOW_STALE=Symbol("allowStale");const MAX_AGE=Symbol("maxAge");const DISPOSE=Symbol("dispose");const NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet");const LRU_LIST=Symbol("lruList");const CACHE=Symbol("cache");const UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet");const naiveLength=()=>1;class LRUCache{constructor(options){if(typeof options==="number")options={max:options};if(!options)options={};if(options.max&&(typeof options.max!=="number"||options.max<0))throw new TypeError("max must be a non-negative number");const max=this[MAX]=options.max||Infinity;const lc=options.length||naiveLength;this[LENGTH_CALCULATOR]=typeof lc!=="function"?naiveLength:lc;this[ALLOW_STALE]=options.stale||false;if(options.maxAge&&typeof options.maxAge!=="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=options.maxAge||0;this[DISPOSE]=options.dispose;this[NO_DISPOSE_ON_SET]=options.noDisposeOnSet||false;this[UPDATE_AGE_ON_GET]=options.updateAgeOnGet||false;this.reset()}set max(mL){if(typeof mL!=="number"||mL<0)throw new TypeError("max must be a non-negative number");this[MAX]=mL||Infinity;trim(this)}get max(){return this[MAX]}set allowStale(allowStale){this[ALLOW_STALE]=!!allowStale}get allowStale(){return this[ALLOW_STALE]}set maxAge(mA){if(typeof mA!=="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=mA;trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(lC){if(typeof lC!=="function")lC=naiveLength;if(lC!==this[LENGTH_CALCULATOR]){this[LENGTH_CALCULATOR]=lC;this[LENGTH]=0;this[LRU_LIST].forEach(hit=>{hit.length=this[LENGTH_CALCULATOR](hit.value,hit.key);this[LENGTH]+=hit.length})}trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(fn,thisp){thisp=thisp||this;for(let walker=this[LRU_LIST].tail;walker!==null;){const prev=walker.prev;forEachStep(this,fn,walker,thisp);walker=prev}}forEach(fn,thisp){thisp=thisp||this;for(let walker=this[LRU_LIST].head;walker!==null;){const next=walker.next;forEachStep(this,fn,walker,thisp);walker=next}}keys(){return this[LRU_LIST].toArray().map(k=>k.key)}values(){return this[LRU_LIST].toArray().map(k=>k.value)}reset(){if(this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length){this[LRU_LIST].forEach(hit=>this[DISPOSE](hit.key,hit.value))}this[CACHE]=new Map;this[LRU_LIST]=new Yallist;this[LENGTH]=0}dump(){return this[LRU_LIST].map(hit=>isStale(this,hit)?false:{k:hit.key,v:hit.value,e:hit.now+(hit.maxAge||0)}).toArray().filter(h=>h)}dumpLru(){return this[LRU_LIST]}set(key,value,maxAge){maxAge=maxAge||this[MAX_AGE];if(maxAge&&typeof maxAge!=="number")throw new TypeError("maxAge must be a number");const now=maxAge?Date.now():0;const len=this[LENGTH_CALCULATOR](value,key);if(this[CACHE].has(key)){if(len>this[MAX]){del(this,this[CACHE].get(key));return false}const node=this[CACHE].get(key);const item=node.value;if(this[DISPOSE]){if(!this[NO_DISPOSE_ON_SET])this[DISPOSE](key,item.value)}item.now=now;item.maxAge=maxAge;item.value=value;this[LENGTH]+=len-item.length;item.length=len;this.get(key);trim(this);return true}const hit=new Entry(key,value,len,now,maxAge);if(hit.length>this[MAX]){if(this[DISPOSE])this[DISPOSE](key,value);return false}this[LENGTH]+=hit.length;this[LRU_LIST].unshift(hit);this[CACHE].set(key,this[LRU_LIST].head);trim(this);return true}has(key){if(!this[CACHE].has(key))return false;const hit=this[CACHE].get(key).value;return!isStale(this,hit)}get(key){return get(this,key,true)}peek(key){return get(this,key,false)}pop(){const node=this[LRU_LIST].tail;if(!node)return null;del(this,node);return node.value}del(key){del(this,this[CACHE].get(key))}load(arr){this.reset();const now=Date.now();for(let l=arr.length-1;l>=0;l--){const hit=arr[l];const expiresAt=hit.e||0;if(expiresAt===0)this.set(hit.k,hit.v);else{const maxAge=expiresAt-now;if(maxAge>0){this.set(hit.k,hit.v,maxAge)}}}}prune(){this[CACHE].forEach((value,key)=>get(this,key,false))}}const get=(self,key,doUse)=>{const node=self[CACHE].get(key);if(node){const hit=node.value;if(isStale(self,hit)){del(self,node);if(!self[ALLOW_STALE])return undefined}else{if(doUse){if(self[UPDATE_AGE_ON_GET])node.value.now=Date.now();self[LRU_LIST].unshiftNode(node)}}return hit.value}};const isStale=(self,hit)=>{if(!hit||!hit.maxAge&&!self[MAX_AGE])return false;const diff=Date.now()-hit.now;return hit.maxAge?diff>hit.maxAge:self[MAX_AGE]&&diff>self[MAX_AGE]};const trim=self=>{if(self[LENGTH]>self[MAX]){for(let walker=self[LRU_LIST].tail;self[LENGTH]>self[MAX]&&walker!==null;){const prev=walker.prev;del(self,walker);walker=prev}}};const del=(self,node)=>{if(node){const hit=node.value;if(self[DISPOSE])self[DISPOSE](hit.key,hit.value);self[LENGTH]-=hit.length;self[CACHE].delete(hit.key);self[LRU_LIST].removeNode(node)}};class Entry{constructor(key,value,length,now,maxAge){this.key=key;this.value=value;this.length=length;this.now=now;this.maxAge=maxAge||0}}const forEachStep=(self,fn,node,thisp)=>{let hit=node.value;if(isStale(self,hit)){del(self,node);if(!self[ALLOW_STALE])hit=undefined}if(hit)fn.call(thisp,hit.value,hit.key,self)};module.exports=LRUCache},{yallist:67}],62:[function(require,module,exports){(function(global){(function(){(function(){"use strict";var objectTypes={function:true,object:true};var root=objectTypes[typeof window]&&window||this;var oldRoot=root;var freeExports=objectTypes[typeof exports]&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&typeof global=="object"&&global;if(freeGlobal&&(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal)){root=freeGlobal}var maxSafeInteger=Math.pow(2,53)-1;var reOpera=/\bOpera/;var thisBinding=this;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var toString=objectProto.toString;function capitalize(string){string=String(string);return string.charAt(0).toUpperCase()+string.slice(1)}function cleanupOS(os,pattern,label){var data={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};if(pattern&&label&&/^Win/i.test(os)&&!/^Windows Phone /i.test(os)&&(data=data[/[\d.]+$/.exec(os)])){os="Windows "+data}os=String(os);if(pattern&&label){os=os.replace(RegExp(pattern,"i"),label)}os=format(os.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]);return os}function each(object,callback){var index=-1,length=object?object.length:0;if(typeof length=="number"&&length>-1&&length<=maxSafeInteger){while(++index<length){callback(object[index],index,object)}}else{forOwn(object,callback)}}function format(string){string=trim(string);return/^(?:webOS|i(?:OS|P))/.test(string)?string:capitalize(string)}function forOwn(object,callback){for(var key in object){if(hasOwnProperty.call(object,key)){callback(object[key],key,object)}}}function getClassOf(value){return value==null?capitalize(value):toString.call(value).slice(8,-1)}function isHostType(object,property){var type=object!=null?typeof object[property]:"number";return!/^(?:boolean|number|string|undefined)$/.test(type)&&(type=="object"?!!object[property]:true)}function qualify(string){return String(string).replace(/([ -])(?!$)/g,"$1?")}function reduce(array,callback){var accumulator=null;each(array,function(value,index){accumulator=callback(accumulator,value,index,array)});return accumulator}function trim(string){return String(string).replace(/^ +| +$/g,"")}function parse(ua){var context=root;var isCustomContext=ua&&typeof ua=="object"&&getClassOf(ua)!="String";if(isCustomContext){context=ua;ua=null}var nav=context.navigator||{};var userAgent=nav.userAgent||"";ua||(ua=userAgent);var isModuleScope=isCustomContext||thisBinding==oldRoot;var likeChrome=isCustomContext?!!nav.likeChrome:/\bChrome\b/.test(ua)&&!/internal|\n/i.test(toString.toString());var objectClass="Object",airRuntimeClass=isCustomContext?objectClass:"ScriptBridgingProxyObject",enviroClass=isCustomContext?objectClass:"Environment",javaClass=isCustomContext&&context.java?"JavaPackage":getClassOf(context.java),phantomClass=isCustomContext?objectClass:"RuntimeObject";var java=/\bJava/.test(javaClass)&&context.java;var rhino=java&&getClassOf(context.environment)==enviroClass;var alpha=java?"a":"α";var beta=java?"b":"β";var doc=context.document||{};var opera=context.operamini||context.opera;var operaClass=reOpera.test(operaClass=isCustomContext&&opera?opera["[[Class]]"]:getClassOf(opera))?operaClass:opera=null;var data;var arch=ua;var description=[];var prerelease=null;var useFeatures=ua==userAgent;var version=useFeatures&&opera&&typeof opera.version=="function"&&opera.version();var isSpecialCasedOS;var layout=getLayout([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]);var name=getName(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]);var product=getProduct([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]);var manufacturer=getManufacturer({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}});var os=getOS(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function getLayout(guesses){return reduce(guesses,function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)})}function getManufacturer(guesses){return reduce(guesses,function(result,value,key){return result||(value[product]||value[/^[a-z]+(?: +[a-z]+\b)*/i.exec(product)]||RegExp("\\b"+qualify(key)+"(?:\\b|\\w*\\d)","i").exec(ua))&&key})}function getName(guesses){return reduce(guesses,function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)})}function getOS(guesses){return reduce(guesses,function(result,guess){var pattern=guess.pattern||qualify(guess);if(!result&&(result=RegExp("\\b"+pattern+"(?:/[\\d.]+|[ \\w.]*)","i").exec(ua))){result=cleanupOS(result,pattern,guess.label||guess)}return result})}function getProduct(guesses){return reduce(guesses,function(result,guess){var pattern=guess.pattern||qualify(guess);if(!result&&(result=RegExp("\\b"+pattern+" *\\d+[.\\w_]*","i").exec(ua)||RegExp("\\b"+pattern+" *\\w+-[\\w]*","i").exec(ua)||RegExp("\\b"+pattern+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(ua))){if((result=String(guess.label&&!RegExp(pattern,"i").test(guess.label)?guess.label:result).split("/"))[1]&&!/[\d.]+/.test(result[0])){result[0]+=" "+result[1]}guess=guess.label||guess;result=format(result[0].replace(RegExp(pattern,"i"),guess).replace(RegExp("; *(?:"+guess+"[_-])?","i")," ").replace(RegExp("("+guess+")[-_.]?(\\w)","i"),"$1 $2"))}return result})}function getVersion(patterns){return reduce(patterns,function(result,pattern){return result||(RegExp(pattern+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(ua)||0)[1]||null})}function toStringPlatform(){return this.description||""}layout&&(layout=[layout]);if(/\bAndroid\b/.test(os)&&!product&&(data=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(ua))){product=trim(data[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null}if(manufacturer&&!product){product=getProduct([manufacturer])}else if(manufacturer&&product){product=product.replace(RegExp("^("+qualify(manufacturer)+")[-_.\\s]","i"),manufacturer+" ").replace(RegExp("^("+qualify(manufacturer)+")[-_.]?(\\w)","i"),manufacturer+" $2")}if(data=/\bGoogle TV\b/.exec(product)){product=data[0]}if(/\bSimulator\b/i.test(ua)){product=(product?product+" ":"")+"Simulator"}if(name=="Opera Mini"&&/\bOPiOS\b/.test(ua)){description.push("running in Turbo/Uncompressed mode")}if(name=="IE"&&/\blike iPhone OS\b/.test(ua)){data=parse(ua.replace(/like iPhone OS/,""));manufacturer=data.manufacturer;product=data.product}else if(/^iP/.test(product)){name||(name="Safari");os="iOS"+((data=/ OS ([\d_]+)/i.exec(ua))?" "+data[1].replace(/_/g,"."):"")}else if(name=="Konqueror"&&/^Linux\b/i.test(os)){os="Kubuntu"}else if(manufacturer&&manufacturer!="Google"&&(/Chrome/.test(name)&&!/\bMobile Safari\b/i.test(ua)||/\bVita\b/.test(product))||/\bAndroid\b/.test(os)&&/^Chrome/.test(name)&&/\bVersion\//i.test(ua)){name="Android Browser";os=/\bAndroid\b/.test(os)?os:"Android"}else if(name=="Silk"){if(!/\bMobi/i.test(ua)){os="Android";description.unshift("desktop mode")}if(/Accelerated *= *true/i.test(ua)){description.unshift("accelerated")}}else if(name=="UC Browser"&&/\bUCWEB\b/.test(ua)){description.push("speed mode")}else if(name=="PaleMoon"&&(data=/\bFirefox\/([\d.]+)\b/.exec(ua))){description.push("identifying as Firefox "+data[1])}else if(name=="Firefox"&&(data=/\b(Mobile|Tablet|TV)\b/i.exec(ua))){os||(os="Firefox OS");product||(product=data[1])}else if(!name||(data=!/\bMinefield\b/i.test(ua)&&/\b(?:Firefox|Safari)\b/.exec(name))){if(name&&!product&&/[\/,]|^[^(]+?\)/.test(ua.slice(ua.indexOf(data+"/")+8))){name=null}if((data=product||manufacturer||os)&&(product||manufacturer||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(os))){name=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(os)?os:data)+" Browser"}}else if(name=="Electron"&&(data=(/\bChrome\/([\d.]+)\b/.exec(ua)||0)[1])){description.push("Chromium "+data)}if(!version){version=getVersion(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",qualify(name),"(?:Firefox|Minefield|NetFront)"])}if(data=layout=="iCab"&&parseFloat(version)>3&&"WebKit"||/\bOpera\b/.test(name)&&(/\bOPR\b/.test(ua)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(ua)&&!/^(?:Trident|EdgeHTML)$/.test(layout)&&"WebKit"||!layout&&/\bMSIE\b/i.test(ua)&&(os=="Mac OS"?"Tasman":"Trident")||layout=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(name)&&"NetFront"){layout=[data]}if(name=="IE"&&(data=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(ua)||0)[1])){name+=" Mobile";os="Windows Phone "+(/\+$/.test(data)?data:data+".x");description.unshift("desktop mode")}else if(/\bWPDesktop\b/i.test(ua)){name="IE Mobile";os="Windows Phone 8.x";description.unshift("desktop mode");version||(version=(/\brv:([\d.]+)/.exec(ua)||0)[1])}else if(name!="IE"&&layout=="Trident"&&(data=/\brv:([\d.]+)/.exec(ua))){if(name){description.push("identifying as "+name+(version?" "+version:""))}name="IE";version=data[1]}if(useFeatures){if(isHostType(context,"global")){if(java){data=java.lang.System;arch=data.getProperty("os.arch");os=os||data.getProperty("os.name")+" "+data.getProperty("os.version")}if(rhino){try{version=context.require("ringo/engine").version.join(".");name="RingoJS"}catch(e){if((data=context.system)&&data.global.system==context.system){name="Narwhal";os||(os=data[0].os||null)}}if(!name){name="Rhino"}}else if(typeof context.process=="object"&&!context.process.browser&&(data=context.process)){if(typeof data.versions=="object"){if(typeof data.versions.electron=="string"){description.push("Node "+data.versions.node);name="Electron";version=data.versions.electron}else if(typeof data.versions.nw=="string"){description.push("Chromium "+version,"Node "+data.versions.node);name="NW.js";version=data.versions.nw}}if(!name){name="Node.js";arch=data.arch;os=data.platform;version=/[\d.]+/.exec(data.version);version=version?version[0]:null}}}else if(getClassOf(data=context.runtime)==airRuntimeClass){name="Adobe AIR";os=data.flash.system.Capabilities.os}else if(getClassOf(data=context.phantom)==phantomClass){name="PhantomJS";version=(data=data.version||null)&&data.major+"."+data.minor+"."+data.patch}else if(typeof doc.documentMode=="number"&&(data=/\bTrident\/(\d+)/i.exec(ua))){version=[version,doc.documentMode];if((data=+data[1]+4)!=version[1]){description.push("IE "+version[1]+" mode");layout&&(layout[1]="");version[1]=data}version=name=="IE"?String(version[1].toFixed(1)):version[0]}else if(typeof doc.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(name)){description.push("masking as "+name+" "+version);name="IE";version="11.0";layout=["Trident"];os="Windows"}os=os&&format(os)}if(version&&(data=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(version)||/(?:alpha|beta)(?: ?\d)?/i.exec(ua+";"+(useFeatures&&nav.appMinorVersion))||/\bMinefield\b/i.test(ua)&&"a")){prerelease=/b/i.test(data)?"beta":"alpha";version=version.replace(RegExp(data+"\\+?$"),"")+(prerelease=="beta"?beta:alpha)+(/\d+\+?/.exec(data)||"")}if(name=="Fennec"||name=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(os)){name="Firefox Mobile"}else if(name=="Maxthon"&&version){version=version.replace(/\.[\d.]+/,".x")}else if(/\bXbox\b/i.test(product)){if(product=="Xbox 360"){os=null}if(product=="Xbox 360"&&/\bIEMobile\b/.test(ua)){description.unshift("mobile mode")}}else if((/^(?:Chrome|IE|Opera)$/.test(name)||name&&!product&&!/Browser|Mobi/.test(name))&&(os=="Windows CE"||/Mobi/i.test(ua))){name+=" Mobile"}else if(name=="IE"&&useFeatures){try{if(context.external===null){description.unshift("platform preview")}}catch(e){description.unshift("embedded")}}else if((/\bBlackBerry\b/.test(product)||/\bBB10\b/.test(ua))&&(data=(RegExp(product.replace(/ +/g," *")+"/([.\\d]+)","i").exec(ua)||0)[1]||version)){data=[data,/BB10/.test(ua)];os=(data[1]?(product=null,manufacturer="BlackBerry"):"Device Software")+" "+data[0];version=null}else if(this!=forOwn&&product!="Wii"&&(useFeatures&&opera||/Opera/.test(name)&&/\b(?:MSIE|Firefox)\b/i.test(ua)||name=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(os)||name=="IE"&&(os&&!/^Win/.test(os)&&version>5.5||/\bWindows XP\b/.test(os)&&version>8||version==8&&!/\bTrident\b/.test(ua)))&&!reOpera.test(data=parse.call(forOwn,ua.replace(reOpera,"")+";"))&&data.name){data="ing as "+data.name+((data=data.version)?" "+data:"");if(reOpera.test(name)){if(/\bIE\b/.test(data)&&os=="Mac OS"){os=null}data="identify"+data}else{data="mask"+data;if(operaClass){name=format(operaClass.replace(/([a-z])([A-Z])/g,"$1 $2"))}else{name="Opera"}if(/\bIE\b/.test(data)){os=null}if(!useFeatures){version=null}}layout=["Presto"];description.push(data)}if(data=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(ua)||0)[1]){data=[parseFloat(data.replace(/\.(\d)$/,".0$1")),data];if(name=="Safari"&&data[1].slice(-1)=="+"){name="WebKit Nightly";prerelease="alpha";version=data[1].slice(0,-1)}else if(version==data[1]||version==(data[2]=(/\bSafari\/([\d.]+\+?)/i.exec(ua)||0)[1])){version=null}data[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(ua)||0)[1];if(data[0]==537.36&&data[2]==537.36&&parseFloat(data[1])>=28&&layout=="WebKit"){layout=["Blink"]}if(!useFeatures||!likeChrome&&!data[1]){layout&&(layout[1]="like Safari");data=(data=data[0],data<400?1:data<500?2:data<526?3:data<533?4:data<534?"4+":data<535?5:data<537?6:data<538?7:data<601?8:data<602?9:data<604?10:data<606?11:data<608?12:"12")}else{layout&&(layout[1]="like Chrome");data=data[1]||(data=data[0],data<530?1:data<532?2:data<532.05?3:data<533?4:data<534.03?5:data<534.07?6:data<534.1?7:data<534.13?8:data<534.16?9:data<534.24?10:data<534.3?11:data<535.01?12:data<535.02?"13+":data<535.07?15:data<535.11?16:data<535.19?17:data<536.05?18:data<536.1?19:data<537.01?20:data<537.11?"21+":data<537.13?23:data<537.18?24:data<537.24?25:data<537.36?26:layout!="Blink"?"27":"28")}layout&&(layout[1]+=" "+(data+=typeof data=="number"?".x":/[.+]/.test(data)?"":"+"));if(name=="Safari"&&(!version||parseInt(version)>45)){version=data}else if(name=="Chrome"&&/\bHeadlessChrome/i.test(ua)){description.unshift("headless")}}if(name=="Opera"&&(data=/\bzbov|zvav$/.exec(os))){name+=" ";description.unshift("desktop mode");if(data=="zvav"){name+="Mini";version=null}else{name+="Mobile"}os=os.replace(RegExp(" *"+data+"$"),"")}else if(name=="Safari"&&/\bChrome\b/.exec(layout&&layout[1])){description.unshift("desktop mode");name="Chrome Mobile";version=null;if(/\bOS X\b/.test(os)){manufacturer="Apple";os="iOS 4.3+"}else{os=null}}else if(/\bSRWare Iron\b/.test(name)&&!version){version=getVersion("Chrome")}if(version&&version.indexOf(data=/[\d.]+$/.exec(os))==0&&ua.indexOf("/"+data+"-")>-1){os=trim(os.replace(data,""))}if(os&&os.indexOf(name)!=-1&&!RegExp(name+" OS").test(os)){os=os.replace(RegExp(" *"+qualify(name)+" *"),"")}if(layout&&!/\b(?:Avant|Nook)\b/.test(name)&&(/Browser|Lunascape|Maxthon/.test(name)||name!="Safari"&&/^iOS/.test(os)&&/\bSafari\b/.test(layout[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(name)&&layout[1])){(data=layout[layout.length-1])&&description.push(data)}if(description.length){description=["("+description.join("; ")+")"]}if(manufacturer&&product&&product.indexOf(manufacturer)<0){description.push("on "+manufacturer)}if(product){description.push((/^on /.test(description[description.length-1])?"":"on ")+product)}if(os){data=/ ([\d.+]+)$/.exec(os);isSpecialCasedOS=data&&os.charAt(os.length-data[0].length-1)=="/";os={architecture:32,family:data&&!isSpecialCasedOS?os.replace(data[0],""):os,version:data?data[1]:null,toString:function(){var version=this.version;return this.family+(version&&!isSpecialCasedOS?" "+version:"")+(this.architecture==64?" 64-bit":"")}}}if((data=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(arch))&&!/\bi686\b/i.test(arch)){if(os){os.architecture=64;os.family=os.family.replace(RegExp(" *"+data),"")}if(name&&(/\bWOW64\b/i.test(ua)||useFeatures&&/\w(?:86|32)$/.test(nav.cpuClass||nav.platform)&&!/\bWin64; x64\b/i.test(ua))){description.unshift("32-bit")}}else if(os&&/^OS X/.test(os.family)&&name=="Chrome"&&parseFloat(version)>=39){os.architecture=64}ua||(ua=null);var platform={};platform.description=ua;platform.layout=layout&&layout[0];platform.manufacturer=manufacturer;platform.name=name;platform.prerelease=prerelease;platform.product=product;platform.ua=ua;platform.version=name&&version;platform.os=os||{architecture:null,family:null,version:null,toString:function(){return"null"}};platform.parse=parse;platform.toString=toStringPlatform;if(platform.version){description.unshift(version)}if(platform.name){description.unshift(name)}if(os&&name&&!(os==String(os).split(" ")[0]&&(os==name.split(" ")[0]||product))){description.push(product?"("+os+")":"on "+os)}if(description.length){platform.description=description.join(" ")}return platform}var platform=parse();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root.platform=platform;define(function(){return platform})}else if(freeExports&&freeModule){forOwn(platform,function(value,key){freeExports[key]=value})}else{root.platform=platform}}).call(this)}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],63:[function(require,module,exports){"use strict";module.exports=require("./lib/u2f-api")},{"./lib/u2f-api":65}],64:[function(require,module,exports){"use strict";var u2f=u2f||{};module.exports=u2f;u2f.EXTENSION_ID="kmendfapggjehodndflmmgagdbamhnfd";u2f.MessageTypes={U2F_REGISTER_REQUEST:"u2f_register_request",U2F_SIGN_REQUEST:"u2f_sign_request",U2F_REGISTER_RESPONSE:"u2f_register_response",U2F_SIGN_RESPONSE:"u2f_sign_response"};u2f.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5};u2f.Request;u2f.Response;u2f.Error;u2f.SignRequest;u2f.SignResponse;u2f.RegisterRequest;u2f.RegisterResponse;u2f.disconnect=function(){if(u2f.port_&&u2f.port_.port_){u2f.port_.port_.disconnect();u2f.port_=null}};u2f.getMessagePort=function(callback){if(typeof chrome!="undefined"&&chrome.runtime){var msg={type:u2f.MessageTypes.U2F_SIGN_REQUEST,signRequests:[]};chrome.runtime.sendMessage(u2f.EXTENSION_ID,msg,function(){if(!chrome.runtime.lastError){u2f.getChromeRuntimePort_(callback)}else{u2f.getIframePort_(callback)}})}else{u2f.getIframePort_(callback)}};u2f.getChromeRuntimePort_=function(callback){var port=chrome.runtime.connect(u2f.EXTENSION_ID,{includeTlsChannelId:true});setTimeout(function(){callback(null,new u2f.WrappedChromeRuntimePort_(port))},0)};u2f.WrappedChromeRuntimePort_=function(port){this.port_=port};u2f.WrappedChromeRuntimePort_.prototype.postMessage=function(message){this.port_.postMessage(message)};u2f.WrappedChromeRuntimePort_.prototype.addEventListener=function(eventName,handler){var name=eventName.toLowerCase();if(name=="message"||name=="onmessage"){this.port_.onMessage.addListener(function(message){handler({data:message})})}else{console.error("WrappedChromeRuntimePort only supports onMessage")}};u2f.getIframePort_=function(callback){var iframeOrigin="chrome-extension://"+u2f.EXTENSION_ID;var iframe=document.createElement("iframe");iframe.src=iframeOrigin+"/u2f-comms.html";iframe.setAttribute("style","display:none");document.body.appendChild(iframe);var hasCalledBack=false;var channel=new MessageChannel;var ready=function(message){if(message.data=="ready"){channel.port1.removeEventListener("message",ready);if(!hasCalledBack){hasCalledBack=true;callback(null,channel.port1)}}else{console.error('First event on iframe port was not "ready"')}};channel.port1.addEventListener("message",ready);channel.port1.start();iframe.addEventListener("load",function(){iframe.contentWindow.postMessage("init",iframeOrigin,[channel.port2])});setTimeout(function(){if(!hasCalledBack){hasCalledBack=true;callback(new Error("IFrame extension not supported"))}},200)};u2f.EXTENSION_TIMEOUT_SEC=30;u2f.port_=null;u2f.waitingForPort_=[];u2f.reqCounter_=0;u2f.callbackMap_={};u2f.getPortSingleton_=function(callback){if(u2f.port_){callback(null,u2f.port_)}else{if(u2f.waitingForPort_.length==0){u2f.getMessagePort(function(err,port){if(!err){u2f.port_=port;u2f.port_.addEventListener("message",u2f.responseHandler_)}while(u2f.waitingForPort_.length)u2f.waitingForPort_.shift()(err,port)})}u2f.waitingForPort_.push(callback)}};u2f.responseHandler_=function(message){var response=message.data;var reqId=response["requestId"];if(!reqId||!u2f.callbackMap_[reqId]){console.error("Unknown or missing requestId in response.");return}var cb=u2f.callbackMap_[reqId];delete u2f.callbackMap_[reqId];cb(null,response["responseData"])};u2f.isSupported=function(callback){u2f.getPortSingleton_(function(err,port){callback(!err)})};u2f.sign=function(signRequests,callback,opt_timeoutSeconds){u2f.getPortSingleton_(function(err,port){if(err)return callback(err);var reqId=++u2f.reqCounter_;u2f.callbackMap_[reqId]=callback;var req={type:u2f.MessageTypes.U2F_SIGN_REQUEST,signRequests:signRequests,timeoutSeconds:typeof opt_timeoutSeconds!=="undefined"?opt_timeoutSeconds:u2f.EXTENSION_TIMEOUT_SEC,requestId:reqId};port.postMessage(req)})};u2f.register=function(registerRequests,signRequests,callback,opt_timeoutSeconds){u2f.getPortSingleton_(function(err,port){if(err)return callback(err);var reqId=++u2f.reqCounter_;u2f.callbackMap_[reqId]=callback;var req={type:u2f.MessageTypes.U2F_REGISTER_REQUEST,signRequests:signRequests,registerRequests:registerRequests,timeoutSeconds:typeof opt_timeoutSeconds!=="undefined"?opt_timeoutSeconds:u2f.EXTENSION_TIMEOUT_SEC,requestId:reqId};port.postMessage(req)})}},{}],65:[function(require,module,exports){(function(global){(function(){"use strict";module.exports=API;var chromeApi=require("./google-u2f-api");var isBrowser=typeof navigator!=="undefined"&&!!navigator.userAgent;var isSafari=isBrowser&&navigator.userAgent.match(/Safari\//)&&!navigator.userAgent.match(/Chrome\//);var isEDGE=isBrowser&&navigator.userAgent.match(/Edge\/1[2345]/);var _backend=null;function getBackend(Promise){if(!_backend)_backend=new Promise(function(resolve,reject){function notSupported(){resolve({u2f:null,native:true})}if(!isBrowser)return notSupported();if(isSafari)return notSupported();var hasNativeSupport=typeof window.u2f!=="undefined"&&typeof window.u2f.sign==="function";if(hasNativeSupport)resolve({u2f:window.u2f,native:true});if(isEDGE)return notSupported();if(location.protocol==="http:")return notSupported();if(typeof MessageChannel==="undefined")return notSupported();chromeApi.isSupported(function(ok){if(ok)resolve({u2f:chromeApi,native:false});else notSupported()})});return _backend}function API(Promise){return{isSupported:isSupported.bind(Promise),ensureSupport:ensureSupport.bind(Promise),register:register.bind(Promise),sign:sign.bind(Promise),ErrorCodes:API.ErrorCodes,ErrorNames:API.ErrorNames}}API.ErrorCodes={CANCELLED:-1,OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5};API.ErrorNames={"-1":"CANCELLED",0:"OK",1:"OTHER_ERROR",2:"BAD_REQUEST",3:"CONFIGURATION_UNSUPPORTED",4:"DEVICE_INELIGIBLE",5:"TIMEOUT"};function makeError(msg,err){var code=err!=null?err.errorCode:1;var type=API.ErrorNames[""+code];var error=new Error(msg);error.metaData={type:type,code:code};return error}function deferPromise(Promise,promise){var ret={};ret.promise=new Promise(function(resolve,reject){ret.resolve=resolve;ret.reject=reject;promise.then(resolve,reject)});ret.promise.cancel=function(msg,disconnect){getBackend(Promise).then(function(backend){if(disconnect&&!backend.native)backend.u2f.disconnect();ret.reject(makeError(msg,{errorCode:-1}))})};return ret}function defer(Promise,fun){return deferPromise(Promise,new Promise(function(resolve,reject){try{fun&&fun(resolve,reject)}catch(err){reject(err)}}))}function isSupported(){var Promise=this;return getBackend(Promise).then(function(backend){return!!backend.u2f})}function _ensureSupport(backend){if(!backend.u2f){if(location.protocol==="http:")throw new Error("U2F isn't supported over http, only https");throw new Error("U2F not supported")}}function ensureSupport(){var Promise=this;return getBackend(Promise).then(_ensureSupport)}function register(registerRequests,signRequests,timeout){var Promise=this;if(!Array.isArray(registerRequests))registerRequests=[registerRequests];if(typeof signRequests==="number"&&typeof timeout==="undefined"){timeout=signRequests;signRequests=null}if(!signRequests)signRequests=[];return deferPromise(Promise,getBackend(Promise).then(function(backend){_ensureSupport(backend);var native=backend.native;var u2f=backend.u2f;return new Promise(function(resolve,reject){function cbNative(response){if(response.errorCode)reject(makeError("Registration failed",response));else{delete response.errorCode;resolve(response)}}function cbChrome(err,response){if(err)reject(err);else if(response.errorCode)reject(makeError("Registration failed",response));else resolve(response)}if(native){var appId=registerRequests[0].appId;u2f.register(appId,registerRequests,signRequests,cbNative,timeout)}else{u2f.register(registerRequests,signRequests,cbChrome,timeout)}})})).promise}function sign(signRequests,timeout){var Promise=this;if(!Array.isArray(signRequests))signRequests=[signRequests];return deferPromise(Promise,getBackend(Promise).then(function(backend){_ensureSupport(backend);var native=backend.native;var u2f=backend.u2f;return new Promise(function(resolve,reject){function cbNative(response){if(response.errorCode)reject(makeError("Sign failed",response));else{delete response.errorCode;resolve(response)}}function cbChrome(err,response){if(err)reject(err);else if(response.errorCode)reject(makeError("Sign failed",response));else resolve(response)}if(native){var appId=signRequests[0].appId;var challenge=signRequests[0].challenge;u2f.sign(appId,challenge,signRequests,cbNative,timeout)}else{u2f.sign(signRequests,cbChrome,timeout)}})})).promise}function makeDefault(func){API[func]=function(){if(!global.Promise)throw new Error("The platform doesn't natively support promises");var args=[].slice.call(arguments);return API(global.Promise)[func].apply(null,args)}}makeDefault("isSupported");makeDefault("ensureSupport");makeDefault("register");makeDefault("sign")}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./google-u2f-api":64}],66:[function(require,module,exports){"use strict";module.exports=function(Yallist){Yallist.prototype[Symbol.iterator]=function*(){for(let walker=this.head;walker;walker=walker.next){yield walker.value}}}},{}],67:[function(require,module,exports){"use strict";module.exports=Yallist;Yallist.Node=Node;Yallist.create=Yallist;function Yallist(list){var self=this;if(!(self instanceof Yallist)){self=new Yallist}self.tail=null;self.head=null;self.length=0;if(list&&typeof list.forEach==="function"){list.forEach(function(item){self.push(item)})}else if(arguments.length>0){for(var i=0,l=arguments.length;i<l;i++){self.push(arguments[i])}}return self}Yallist.prototype.removeNode=function(node){if(node.list!==this){throw new Error("removing node which does not belong to this list")}var next=node.next;var prev=node.prev;if(next){next.prev=prev}if(prev){prev.next=next}if(node===this.head){this.head=next}if(node===this.tail){this.tail=prev}node.list.length--;node.next=null;node.prev=null;node.list=null;return next};Yallist.prototype.unshiftNode=function(node){if(node===this.head){return}if(node.list){node.list.removeNode(node)}var head=this.head;node.list=this;node.next=head;if(head){head.prev=node}this.head=node;if(!this.tail){this.tail=node}this.length++};Yallist.prototype.pushNode=function(node){if(node===this.tail){return}if(node.list){node.list.removeNode(node)}var tail=this.tail;node.list=this;node.prev=tail;if(tail){tail.next=node}this.tail=node;if(!this.head){this.head=node}this.length++};Yallist.prototype.push=function(){for(var i=0,l=arguments.length;i<l;i++){push(this,arguments[i])}return this.length};Yallist.prototype.unshift=function(){for(var i=0,l=arguments.length;i<l;i++){unshift(this,arguments[i])}return this.length};Yallist.prototype.pop=function(){if(!this.tail){return undefined}var res=this.tail.value;this.tail=this.tail.prev;if(this.tail){this.tail.next=null}else{this.head=null}this.length--;return res};Yallist.prototype.shift=function(){if(!this.head){return undefined}var res=this.head.value;this.head=this.head.next;if(this.head){this.head.prev=null}else{this.tail=null}this.length--;return res};Yallist.prototype.forEach=function(fn,thisp){thisp=thisp||this;for(var walker=this.head,i=0;walker!==null;i++){fn.call(thisp,walker.value,i,this);walker=walker.next}};Yallist.prototype.forEachReverse=function(fn,thisp){thisp=thisp||this;for(var walker=this.tail,i=this.length-1;walker!==null;i--){fn.call(thisp,walker.value,i,this);walker=walker.prev}};Yallist.prototype.get=function(n){for(var i=0,walker=this.head;walker!==null&&i<n;i++){walker=walker.next}if(i===n&&walker!==null){return walker.value}};Yallist.prototype.getReverse=function(n){for(var i=0,walker=this.tail;walker!==null&&i<n;i++){walker=walker.prev}if(i===n&&walker!==null){return walker.value}};Yallist.prototype.map=function(fn,thisp){thisp=thisp||this;var res=new Yallist;for(var walker=this.head;walker!==null;){res.push(fn.call(thisp,walker.value,this));walker=walker.next}return res};Yallist.prototype.mapReverse=function(fn,thisp){thisp=thisp||this;var res=new Yallist;for(var walker=this.tail;walker!==null;){res.push(fn.call(thisp,walker.value,this));walker=walker.prev}return res};Yallist.prototype.reduce=function(fn,initial){var acc;var walker=this.head;if(arguments.length>1){acc=initial}else if(this.head){walker=this.head.next;acc=this.head.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=0;walker!==null;i++){acc=fn(acc,walker.value,i);walker=walker.next}return acc};Yallist.prototype.reduceReverse=function(fn,initial){var acc;var walker=this.tail;if(arguments.length>1){acc=initial}else if(this.tail){walker=this.tail.prev;acc=this.tail.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=this.length-1;walker!==null;i--){acc=fn(acc,walker.value,i);walker=walker.prev}return acc};Yallist.prototype.toArray=function(){var arr=new Array(this.length);for(var i=0,walker=this.head;walker!==null;i++){arr[i]=walker.value;walker=walker.next}return arr};Yallist.prototype.toArrayReverse=function(){var arr=new Array(this.length);for(var i=0,walker=this.tail;walker!==null;i++){arr[i]=walker.value;walker=walker.prev}return arr};Yallist.prototype.slice=function(from,to){to=to||this.length;if(to<0){to+=this.length}from=from||0;if(from<0){from+=this.length}var ret=new Yallist;if(to<from||to<0){return ret}if(from<0){from=0}if(to>this.length){to=this.length}for(var i=0,walker=this.head;walker!==null&&i<from;i++){walker=walker.next}for(;walker!==null&&i<to;i++,walker=walker.next){ret.push(walker.value)}return ret};Yallist.prototype.sliceReverse=function(from,to){to=to||this.length;if(to<0){to+=this.length}from=from||0;if(from<0){from+=this.length}var ret=new Yallist;if(to<from||to<0){return ret}if(from<0){from=0}if(to>this.length){to=this.length}for(var i=this.length,walker=this.tail;walker!==null&&i>to;i--){walker=walker.prev}for(;walker!==null&&i>from;i--,walker=walker.prev){ret.push(walker.value)}return ret};Yallist.prototype.splice=function(start,deleteCount,...nodes){if(start>this.length){start=this.length-1}if(start<0){start=this.length+start}for(var i=0,walker=this.head;walker!==null&&i<start;i++){walker=walker.next}var ret=[];for(var i=0;walker&&i<deleteCount;i++){ret.push(walker.value);walker=this.removeNode(walker)}if(walker===null){walker=this.tail}if(walker!==this.head&&walker!==this.tail){walker=walker.prev}for(var i=0;i<nodes.length;i++){walker=insert(this,walker,nodes[i])}return ret};Yallist.prototype.reverse=function(){var head=this.head;var tail=this.tail;for(var walker=head;walker!==null;walker=walker.prev){var p=walker.prev;walker.prev=walker.next;walker.next=p}this.head=tail;this.tail=head;return this};function insert(self,node,value){var inserted=node===self.head?new Node(value,null,node,self):new Node(value,node,node.next,self);if(inserted.next===null){self.tail=inserted}if(inserted.prev===null){self.head=inserted}self.length++;return inserted}function push(self,item){self.tail=new Node(item,self.tail,null,self);if(!self.head){self.head=self.tail}self.length++}function unshift(self,item){self.head=new Node(item,null,self.head,self);if(!self.tail){self.tail=self.head}self.length++}function Node(value,prev,next,list){if(!(this instanceof Node)){return new Node(value,prev,next,list)}this.list=list;this.value=value;if(prev){prev.next=this;this.prev=prev}else{this.prev=null}if(next){next.prev=this;this.next=next}else{this.next=null}}try{require("./iterator.js")(Yallist)}catch(er){}},{"./iterator.js":66}],68:[function(require,module,exports){const{default:LedgerTransportU2F}=require("@ledgerhq/hw-transport-u2f");const{default:LedgerTransportWebUsb}=require("@ledgerhq/hw-transport-webusb");const{default:LedgerTransportWebHid}=require("@ledgerhq/hw-transport-webhid");const platform=require("platform");let ENABLE_DEBUG_LOGGING=false;const debugLog=(...args)=>{ENABLE_DEBUG_LOGGING&&console.log(...args)};async function isWebUsbSupported(){try{const isSupported=await LedgerTransportWebUsb.isSupported();return isSupported&&platform.os.family!=="Windows"&&platform.name!=="Opera"}catch(e){return false}}async function isWebHidSupported(){return LedgerTransportWebHid.isSupported().catch(()=>false)}async function isU2fSupported(){return LedgerTransportU2F.isSupported().catch(()=>false)}async function createSupportedTransport(){const[supportWebHid,supportWebUsb,supportU2f]=await Promise.all([isWebHidSupported(),isWebUsbSupported(),isU2fSupported()]);debugLog("Transports supported:",{supportWebHid:supportWebHid,supportWebUsb:supportWebUsb,supportU2f:supportU2f});if(!supportWebHid&&!supportWebUsb&&!supportU2f){const err=new Error("No transports appear to be supported.");err.name="NoTransportSupported";throw err}const supportedTransports=[...supportWebHid?[{name:"WebHID",createTransport:()=>LedgerTransportWebHid.create()}]:[],...supportWebUsb?[{name:"WebUSB",createTransport:()=>LedgerTransportWebUsb.create()}]:[],...supportU2f?[{name:"U2F",createTransport:()=>LedgerTransportU2F.create()}]:[]];let transport=null;let errors=[];for(let i=0;i<supportedTransports.length&&!transport;i+=1){const{name,createTransport}=supportedTransports[i];debugLog(`Creating ${name} transport`);try{transport=await createTransport()}catch(err){if(err.name==="TransportOpenUserCancelled"){throw err}console.warn(`Failed to create ${name} transport.`,err);errors.push({name:err.name,message:err.message})}}return[errors,transport]}module.exports.setDebugLogging=value=>ENABLE_DEBUG_LOGGING=value;module.exports.getSupportedTransport=async function getSupportedTransports(){const[errors,transport]=await createSupportedTransport();if(errors&&!transport){console.error("Failed to initialize ledger transport",{errors:errors});throw errors[errors.length-1]}if(transport){debugLog("Ledger transport created!",transport)}return transport}},{"@ledgerhq/hw-transport-u2f":53,"@ledgerhq/hw-transport-webhid":55,"@ledgerhq/hw-transport-webusb":57,platform:62}],69:[function(require,module,exports){(function(Buffer){(function(){const{getSupportedTransport,setDebugLogging}=require("./supportedTransports");module.exports.getSupportedTransport=getSupportedTransport;module.exports.setDebugLogging=setDebugLogging;function bip32PathToBytes(path){const parts=path.split("/");return Buffer.concat(parts.map(part=>part.endsWith(`'`)?Math.abs(parseInt(part.slice(0,-1)))|2147483648:Math.abs(parseInt(part))).map(i32=>Buffer.from([i32>>24&255,i32>>16&255,i32>>8&255,i32&255])))}const networkId="W".charCodeAt(0);const DEFAULT_PATH="44'/397'/0'/0'/1'";module.exports.createClient=async function createClient(transport){return{transport:transport,async getVersion(){const response=await this.transport.send(128,6,0,0);const[major,minor,patch]=Array.from(response);return`${major}.${minor}.${patch}`},async getPublicKey(path){path=path||DEFAULT_PATH;const response=await this.transport.send(128,4,0,networkId,bip32PathToBytes(path));return Buffer.from(response.subarray(0,-2))},async sign(transactionData,path){const version=await this.getVersion();console.info("Ledger app version:",version);path=path||DEFAULT_PATH;transactionData=Buffer.from(transactionData);const CHUNK_SIZE=123;const allData=Buffer.concat([bip32PathToBytes(path),transactionData]);for(let offset=0;offset<allData.length;offset+=CHUNK_SIZE){const chunk=Buffer.from(allData.subarray(offset,offset+CHUNK_SIZE));const isLastChunk=offset+CHUNK_SIZE>=allData.length;const response=await this.transport.send(128,2,isLastChunk?128:0,networkId,chunk);if(isLastChunk){return Buffer.from(response.subarray(0,-2))}}}}}}).call(this)}).call(this,require("buffer").Buffer)},{"./supportedTransports":68,buffer:2}]},{},[69])(69)});